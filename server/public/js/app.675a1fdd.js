(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),s=r.n(a);s.a},"33e0":function(e,t,r){"use strict";var a=r("77d4"),s=r.n(a);s.a},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("6cc5");var a=r("2b0e"),s=(r("99af"),r("c740"),r("d81d"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("b85c")),n=r("2f62"),o=(r("7db0"),r("4160"),r("25f0"),r("159b"),r("96cf"),r("1da1")),i=r("d4ec"),c=r("bee2"),l=r("7338"),d=r.n(l);r("ed18").config();var u="db-services";var p=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"checkEMail",value:function(e){console.log("Checking email of "+e);var t={transaction:"select_useremail",userEMail:e};return new Promise((function(r,a){try{d.a.post(u+"/login",t).then((function(t){void 0!==t.data&&t.data.length>0?r(t.data[0].email===e):r(!1)}))}catch(s){a(s)}}))}},{key:"getObservations",value:function(e){return console.log("getObservations of "+e),new Promise((function(t,r){try{var a={transaction:"select_observations",userEMail:e};d.a.post(u,a).then((function(e){t(e.data)}))}catch(s){r(s)}}))}},{key:"getSharedObservations",value:function(e,t){return console.log("getSharedObservations of  "+e+" from "+t),new Promise((function(r,a){try{var s={transaction:"select_sharedobservations",dataOwnerEMail:e,parcelName:t};d.a.post(u,s).then((function(e){r(e.data)}))}catch(n){a(n)}}))}},{key:"getModifiedWeekMetrics",value:function(e){return console.log("getmodifiedWeekMetrics from "+e),new Promise((function(t,r){try{var a={transaction:"select_modifiedweekmetrics",userEMail:e};d.a.post(u,a).then((function(e){t(e.data)}))}catch(s){r(s)}}))}},{key:"sendToModifiedWeekMetrics",value:function(e){return console.log("sendToModifiedWeekMetrics "+e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_modifiedweekmetrics"===e.transaction||"alter_modifiedweekmetrics"===e.transaction||"delete_modifiedweekmetrics"===e.transaction)?("select_modifiedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.data)})),"alter_modifiedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedrows)})),"delete_modifiedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedrows)}))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"sendToParcelDataSharing",value:function(e){return console.log("sendToParcelDataSharing"),console.log(e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_parceldatasharing"===e.transaction||"insert_parceldatasharing"===e.transaction||"delete_parceldatasharing"===e.transaction)?("select_parceldatasharing"===e.transaction&&d.a.post(u,e).then((function(e){t(e.data)})),"insert_parceldatasharing"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedrows)})),"delete_parceldatasharing"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedrows)}))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"postQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,a){try{d.a.post(e,t).then((function(e){r(e)}))}catch(s){a(s)}}))}},{key:"deleteQuery",value:function(e){return d.a.delete(u,e)}},{key:"getMonthLabel",value:function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return}}},{key:"getDayLabel",value:function(e){switch(e){case"1":return"Mon";case"2":return"Tue";case"3":return"Wed";case"4":return"Thu";case"5":return"Fri";case"6":return"Sat";case"0":return"Sun";default:return}}},{key:"extractUserDataObjFrom",value:function(t){console.log("extractUserDataObjFrom : nbRows: "+t.length);var r={};return t.forEach((function(t){void 0===r.userEMail&&(r=new e.MonitoredUser(t.userEMail,t.userId,t.userName));var a=r.parcels.find((function(e){return e.parcelName===t.parcelName}));void 0===a&&(a=new e.MonitoredParcel(t.parcelName,t.userEMail,t.userName,t.userId,{lat:t.parcelLat,lng:t.parcelLng}),r.parcels.push(a));var s=new Date;s.setTime(t.sessionDateInSec+"000");var n=s.getFullYear(),o=a.parcelYears.find((function(e){return e.yearNumber===n}));void 0===o&&(o=new e.MonitoredYear(n),a.parcelYears.push(o));var i=new Date(n,0,1),c=864e5,l=c*(1===i.getDay()?0:0===i.getDay()?1:8-i.getDay()),d=new Date;d.setTime(i.getTime()+l);var u=s.getTime()===d.getTime()?1:Math.ceil((s.getTime()-d.getTime())/c/7),p=s.getTime()-c*(1===s.getDay()?0:0===s.getDay()?6:s.getDay()-1),h=new Date;h.setTime(p);var b=o.yearWeeks.find((function(e){return e.weekNumber===u}));void 0===b&&(b=new e.MonitoredWeek(t.sessionDateInSec+"000"),o.yearWeeks.push(b));var f=b.weekSessions.find((function(e){return e.sessionDateInMs===t.sessionDateInSec+"000"}));void 0===f&&(f=new e.MonitoredSession(t.sessionDateInSec+"000"),b.weekSessions.push(f));var g=new e.MonitoredObservation(t.obsvLabel,t.obsvDateInMs,t.userName,t.userName,{lat:t.obsvLat,lng:t.obsvLng});f.sessionObservations.push(g)})),r}},{key:"addSharedParcelObservations",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("getSharedParcelObservations"),t.next=3,e.sendToParcelDataSharing({transaction:"select_parceldatasharing",userEMail:r.userEMail});case 3:a=t.sent,n=Object(s["a"])(a),t.prev=5,n.s();case 7:if((o=n.n()).done){t.next=16;break}return i=o.value,t.next=11,e.getSharedObservations(i.dataOwnerEMail,i.parcelName);case 11:c=t.sent,l=e.extractUserDataObjFrom(c),r.parcels.push(l.parcels[0]);case 14:t.next=7;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](5),n.e(t.t0);case 21:return t.prev=21,n.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[5,18,21,24]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addWeeksToUserDataObj",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2018,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2019,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;if(console.log("addWeeksToUserDataObj "),void 0===t.parcels)throw" No parcels is currently monitored by the user";for(var o=[],i=[],c=0;c<t.parcels.length;c++){var l=t.parcels[c];if(void 0!==l.parcelYears)for(var d=function(e){var t=l.parcelYears[e].yearNumber;void 0===o.find((function(e){return e===t}))&&o.push(t)},u=0;u<l.parcelYears.length;u++)d(u);for(var p=function(e){void 0===o.find((function(t){return t===e}))&&o.push(e)},h=r;h<=a;h++)p(h);if(void 0!==l.parcelYears)for(var b=0;b<l.parcelYears.length;b++)if(void 0!==l.parcelYears[b].yearWeeks)for(var f=function(e){var t=l.parcelYears[b].yearWeeks[e].weekNumber;void 0===i.find((function(e){return e===t}))&&i.push(t)},g=0;g<l.parcelYears[b].yearWeeks.length;g++)f(g);for(var v=function(e){void 0===i.find((function(t){return t===e}))&&i.push(e)},m=s;m<=n;m++)v(m)}for(var w=0;w<t.parcels.length;w++)for(var k=t.parcels[w],y=function(t){var r=o[t],a=k.parcelYears.find((function(e){return e.yearNumber===r}));void 0===a&&(a=new e.MonitoredYear(r),k.parcelYears.push(a));for(var s=function(t){var s=i[t],n=a.yearWeeks.find((function(e){return e.weekNumber===s}));void 0===n&&(n=new e.MonitoredWeek(r,s),a.yearWeeks.push(n))},n=0;n<i.length;n++)s(n)},j=0;j<o.length;j++)y(j)}},{key:"enforceConsistencyOfUserDataObj",value:function(e){if(console.log("enforceConsistencyOfUserDataObj "),void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0)for(var a=0;a<r.parcelYears.length;a++){var s=r.parcelYears[a];if(void 0!==s.yearWeeks&&s.yearWeeks.length>0)for(var n=0;n<s.yearWeeks.length;n++){var o=s.yearWeeks[n];if(void 0!==o.weekSessions&&o.weekSessions.length>0){var i=0,c=0,l=0,d=0,u=0;this.weekICApex=0;for(var p=0;p<o.weekSessions.length;p++){var h=o.weekSessions[p],b=0,f=0;if(void 0!==h.sessionObservations){for(var g=0;g<h.sessionObservations.length;g++){var v=h.sessionObservations[g];"P"===v.obsvLabel&&l++,"R"===v.obsvLabel&&d++,"C"===v.obsvLabel&&u++,b+=v.obsvValue,f++,c+=v.obsvValue,i++}f>0&&(h.sessionAVGrowth=b/f)}}o.weekNbObservations=i,o.weekNbObsFullGrowth=l,o.weekNbObsSlowGrowth=d,o.weekNbObsStoppedGrowth=u,o.weekAVGrowth=Math.round(100*c/i)/100,o.weekPrctFullGrowth=Math.round(1e4*l/i)/100,o.weekPrctSlowGrowth=Math.round(1e4*d/i)/100,o.weekPrctStoppedGrowth=Math.round(1e4*u/i)/100,o.weekICApex=o.reInitICApex()}}}}}},{key:"sortUserDataObjByYearByWeek",value:function(e){if(void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0){for(var a=0;a<r.parcelYears.length;a++){var s=r.parcelYears[a];void 0!==s.yearWeeks&&s.yearWeeks.length>0&&s.yearWeeks.sort((function(e,t){return e.weekNumber-t.weekNumber}))}r.parcelYears.sort((function(e,t){return e.yearNumber-t.yearNumber}))}}}},{key:"MonitoredUser",value:function(e,t,r){var a=this;this.userEMail=e,this.userId=t,this.userName=r,this.parcels=[],this.toString=function(){return"user: email ".concat(a.userEMail," id: ").concat(a.userId," name ").concat(a.userName)}}},{key:"MonitoredParcel",value:function(e,t,r,a,s){var n=this;this.parcelName=e,this.dataOwnerEMail=t,this.dataOwnerName=r,this.dataOwnerId=a,this.parcelCoord=s,this.parcelYears=[],this.toString=function(){return"parcel: "+n.parcelName}}},{key:"MonitoredYear",value:function(e){this.yearNumber=e,this.yearWeeks=[],this.toString=function(){return"year: ".concat(this.yearNumber)}}},{key:"MonitoredWeek",value:function(t,r){var a=this;if(this.weekNumber=0,this.weekLabel="",this.weekFullDate=new Date,this.weekSessions=[],this.weekNbObservations=0,this.weekNbObsFullGrowth=0,this.weekNbObsSlowGrowth=0,this.weekNbObsStoppedGrowth=0,this.weekPrctFullGrowth=0,this.weekPrctSlowGrowth=0,this.weekPrctStoppedGrowth=0,this.weekAVGrowth=0,this.weekICApex=0,this.toString=function(){return"w"+a.weekNumber+"("+a.weekLabel+")"},void 0===r){var s=t,n=new Date;n.setTime(s);var o=new Date(n.getFullYear(),0,1),i=864e5,c=i*(1===o.getDay()?0:0===o.getDay()?1:8-o.getDay()),l=new Date;l.setTime(o.getTime()+c);var d=n.getTime()===l.getTime()?1:Math.ceil((n.getTime()-l.getTime())/i/7),u=n.getTime()-i*(1===n.getDay()?0:0===n.getDay()?6:n.getDay()-1),p=new Date;p.setTime(u);var h=p.getDate()+" "+e.getMonthLabel(p.getMonth());this.weekNumber=d,this.weekLabel=h,this.weekFullDate=p.toString()}else{var b=t,f=r,g=new Date(b,0,1),v=864e5,m=v*(1===g.getDay()?0:0===g.getDay()?1:8-g.getDay()),w=new Date;w.setTime(g.getTime()+m);var k=w.getTime()+7*v*(f-1),y=new Date;y.setTime(k);var j=y.getDate()+" "+e.getMonthLabel(y.getMonth());this.weekNumber=f,this.weekLabel=j,this.weekFullDate=y.toString()}this.reInitICApex=function(){var e=3;return this.weekAVGrowth>=.75?e=0:this.weekPrctFullGrowth>=5?e=1:this.weekPrctSlowGrowth<=90&&(e=2),e}}},{key:"MonitoredSession",value:function(t){var r=new Date;r.setTime(t),this.sessionDateInMs=t,this.sessionDateLabel=r.getDate()+" "+e.getMonthLabel(r.getMonth())+" "+r.getFullYear(),this.sessionAVGrowth=0,this.sessionICApex=0,this.sessionObservations=[]}},{key:"MonitoredObservation",value:function(e,t,r,a,s){this.initObsvValueFromLabel=function(e){switch(e){case"P":return 1;case"R":return.5;case"C":return 0;default:return}},this.obsvLabel=e,this.obsvValue=this.initObsvValueFromLabel(e),this.obsvDateInMs=t,this.obsvOwnerName=r,this.obsvUserName=a,this.obsvCoord=s}}]),e}(),h=p;a["a"].use(n["a"]);var b=new n["a"].Store({state:{loggedUserEmail:"baptiste.oger@supagro.fr",userDataObj:null,selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,userModifiedWeekMetrics:new Map,viewMode:"developpement"},getters:{parcelNameList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels?e.userDataObj.parcels.map((function(e){return e.parcelName})):[]},yearNumberList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears.map((function(e){return e.yearNumber})):[]},weekLabelList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks.map((function(e){return e.weekLabel})):[]},getParcelIdx:function(e){return function(t,r){return null!==e.userDataObj?e.userDataObj.parcels.findIndex((function(e){return e.parcelName===t&&e.dataOwnerEMail===r})):null}},getYearIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears.findIndex((function(e){return e.yearNumber===t})):-1}},getWeekIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(e){return e.weekNumber===t})):-1}},getSelectedWeekMetric:function(e,t){return t.getWeekMetric(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getWeekMetric:function(e){return function(t,r,a){var s="pIdx:".concat(t," yIdx:").concat(r," wIdx:").concat(a);if(e.userModifiedWeekMetrics.has(s))return e.userModifiedWeekMetrics.get(s);e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx];var n=new Date(e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekFullDate),o={dataUserEMail:e.userDataObj.dataUserEMail,dataOwnerEMail:e.userDataObj.parcels[t].dataOwnerEMail,parcelName:e.userDataObj.parcels[t].parcelName,yearNumber:e.userDataObj.parcels[t].parcelYears[r].yearNumber,weekNumber:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNumber,nbObsFullGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsFullGrowth,nbObsSlowGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsSlowGrowth,nbObsStoppedGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsStoppedGrowth,dateTimeInMs:n.getTime(),modified:!1};return o}},getSelectedWeekMetricTotalNbObs:function(e,t){var r=t.getSelectedWeekMetric,a=parseInt(r.nbObsFullGrowth),s=parseInt(r.nbObsSlowGrowth),n=parseInt(r.nbObsStoppedGrowth);return a+s+n},getTotalNbObs:function(e,t){return function(e,r,a){var s=t.getWeekMetric(e,r,a),n=parseInt(s.nbObsFullGrowth),o=parseInt(s.nbObsSlowGrowth),i=parseInt(s.nbObsStoppedGrowth);return n+o+i}},getAvgGrowth:function(e,t){return function(e,r,a){var s=t.getWeekMetric(e,r,a),n=parseInt(s.nbObsFullGrowth),o=parseInt(s.nbObsSlowGrowth),i=parseInt(s.nbObsStoppedGrowth),c=n+o+i;return 0==c?0:(n+.5*o)/c}}},mutations:{initLoggedUserEmail:function(e,t){e.loggedUserEmail=t},initUserDataObj:function(e,t){e.userDataObj=t},updateSelectedParcelIdx:function(e,t){console.log(" updated selectedParcelIdx store "+t),e.selectedParcelIdx=t},updateSelectedYearIdx:function(e,t){e.selectedYearIdx=t},updateSelectedWeekIdx:function(e,t){e.selectedWeekIdx=t},initUserModifiedWeekMetrics:function(e){console.log("initUserModifiedWeekMetrics"),h.sendToModifiedWeekMetrics({transaction:"select_modifiedweekmetrics",userEMail:e.userDataObj.userEMail}).then((function(t){console.log(t);var r,a=new Map,n=Object(s["a"])(t);try{var o=function(){var t=r.value,s=e.userDataObj.parcels.findIndex((function(e){return e.parcelName===t.parcelName&&e.dataOwnerEMail===t.dataOwnerEMail})),n=e.userDataObj.parcels[0].parcelYears.findIndex((function(e){return e.yearNumber===t.yearNumber})),o=e.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(e){return e.weekNumber===t.weekNumber}));t.modified=!0,a.set("pIdx:".concat(s," yIdx:").concat(n," wIdx:").concat(o),t)};for(n.s();!(r=n.n()).done;)o()}catch(i){n.e(i)}finally{n.f()}e.userModifiedWeekMetrics=a}))},saveSelectedWeekMetric:function(e,t){t.modified=!0,e.userModifiedWeekMetrics.set("pIdx:".concat(e.selectedParcelIdx," yIdx:").concat(e.selectedYearIdx," wIdx:").concat(e.selectedYearIdx),t),t.transaction="alter_modifiedweekmetrics",h.sendToModifiedWeekMetrics(t).then((function(e){console.log(e)}))},deleteSelectedWeekMetric:function(e,t){console.log("deleteSelectedWeekMetric "),console.log(t),t.modified?(e.userModifiedWeekMetrics.delete("pIdx:".concat(e.selectedParcelIdx," yIdx:").concat(e.selectedYearIdx," wIdx:").concat(e.selectedYearIdx),t),t.transaction="delete_modifiedweekmetrics",h.sendToModifiedWeekMetrics(t).then((function(e){console.log(e)}))):console.log("only modified week metrics need to be deleted ")}},actions:{}}),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[[r("ApexMap"),r("hr"),r("Footer")]],2)},g=[],v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{staticClass:"row",staticStyle:{position:"relative",left:"20px",width:"100%"},attrs:{id:"ApexMap"}},[r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2"},[e._v(" campagne : "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYearIdx,expression:"selectedYearIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYearIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.yearNumberList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"col-md-2"},[e._v(" semaine : "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWeekIdx,expression:"selectedWeekIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedWeekIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.weekLabelList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"col-md-5"},[e._v(" parcelle : "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedParcelIdx,expression:"selectedParcelIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedParcelIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.parcelNameList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ("+e._s(e.$store.state.userDataObj.parcels[a].dataOwnerName)+") ")])})),0)]),r("div",{staticClass:"col-md-3"},[r("button",{attrs:{id:"viewPrevYear"},on:{mouseover:function(t){return e.showPrevYear(!0)},mouseout:function(t){return e.showPrevYear(!1)}}},[r("i",{staticClass:"far fa-eye"}),e._v(" campagne précédente ")]),null!==e.msgPrevYear?r("label",[e._v(" "+e._s(e.msgPrevYear)+" ")]):e._e()])]),r("hr"),"debug"===e.$store.state.viewMode?r("div",{staticClass:"row"},[r("p",{staticClass:"text"},[e._v(" "+e._s("nbObsFullGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsFullGrowth+", nbObsSlowGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsSlowGrowth+", nbObsStoppedGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsStoppedGrowth+", (modified: "+e.$store.getters.getSelectedWeekMetric.modified+")")+" ")]),r("p",{staticClass:"text"},[e._v(" "+e._s("currentzoom: "+e.currentZoom+", currentCenter: "+e.currentCenter+")")+" ")])]):e._e(),r("div",{staticClass:"row",staticStyle:{height:"70%"}},[r("l-map",{ref:"parcelInfoMap",staticStyle:{height:"100%"},attrs:{zoom:e.currentZoom,center:e.currentCenter,options:e.mapOptions},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.$store.state.userDataObj.parcels,(function(t,a){return r("div",{key:a,staticClass:"parcels",attrs:{item:t,index:a}},[r("l-marker",{attrs:{"lat-lng":e.getLatLng(t.parcelCoord),icon:e.createIcon(a)},on:{click:function(t){return e.parcelMarkerClick(a)}}},[r("l-popup",[r("div",[r("p",{staticClass:"text"},[e._v(" parcelle : "+e._s(t.parcelName)+" "),r("br"),e._v(" observateur : "+e._s(t.dataOwnerName)+" "),r("br"),e._v(" semaine du : "+e._s(e.$store.getters.weekLabelList[e.selectedWeekIdx])+" "+e._s(e.$store.getters.yearNumberList[e.selectedYearIdx])),r("br"),e.$store.getters.getSelectedWeekMetricTotalNbObs>0?[e._v(" observations : "+e._s(e.$store.getters.getSelectedWeekMetricTotalNbObs)+" "),r("br"),e._v(" - pleine croissance : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsFullGrowth)+" "),r("br"),e._v(" - croissance ralentie : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsSlowGrowth)+" "),r("br"),e._v(" - croissance arrêtée : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsStoppedGrowth)+" "),r("br")]:[e._v(" (pas d'observations)"),r("br")]],2)])])],1)],1)}))],2)],1)]),r("div",{staticClass:"col-md-3",staticStyle:{"max-height":"80%","max-width":"25%",margin:"auto"}},[r("h2",[e._v("Suivi de croissance ")]),e._v(" parcelle: "+e._s(this.$store.getters.parcelNameList[this.$store.state.selectedParcelIdx])+" "),r("br"),r("hr"),e._v(" semaine du "+e._s(this.$store.getters.weekLabelList[this.$store.state.selectedWeekIdx])+" "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("br"),r("apex-growth-pie-chart",{staticClass:"pieChartStyle"}),r("hr"),e._v(" évolution de la croissance "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-growth-line-chart"),r("hr"),e._v(" évolution de la contrainte hydrique "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-hydric-constraint-line-chart"),r("hr")],1)]):e._e()},m=[],w=r("e11e"),k=r("2699"),y=r("a40a"),j=r("4e2b"),x=r("f60f"),O=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"avgGrowthToGreenColor",value:function(e){return e<0?"gray":e<=.125?"green_0":e<=.375?"green_25":e<=.625?"green_50":e<=.875?"green_75":e<=1?"green_100":"gray"}}]),e}(),I=O,D=r("1fca"),M={extends:D["b"],mixins:[D["c"].reactiveData],name:"ApexGrowthPieChart",data:function(){return{chartData:{labels:["% Pleine croissance   ","% Croissance ralentie","% Croissance arrétée"],datasets:[{data:[0,0,0],label:"croissance des apex",backgroundColor:["#2C6109","#6E9624","#C5DC68"],borderColor:["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 1)","rgba(255, 255, 255, 1)"],borderWidth:1}]},chartNoData:{labels:["pas d'observations"],datasets:[{data:[-1],label:"croissance des apex",backgroundColor:["#cccccc"],borderColor:["rgba(255, 255, 255, 1)"],borderWidth:1}]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom",onClick:function(e){return e.stopPropagation()}}}}},computed:{selectedWeekPieData:{get:function(){if(null===this.$store.state.userDataObj)return console.log("CALL selectedPieData "),console.log([0,0,0]),[0,0,0];var e=this.$store.getters.getSelectedWeekMetric,t=parseInt(e.nbObsFullGrowth),r=parseInt(e.nbObsSlowGrowth),a=parseInt(e.nbObsStoppedGrowth),s=0,n=0,o=0,i=t+r+a;return i>0&&(s=Math.round(t/i*100),n=Math.round(r/i*100),o=Math.round(a/i*100)),console.log("CALL selectedPieData "),console.log([s,n,o]),[s,n,o]}}},watch:{selectedWeekPieData:function(e){console.log("WATCH selectedPieData "),console.log(e),this.$store.getters.getSelectedWeekMetricTotalNbObs>0?(this.chartData.datasets[0].data=e,this.renderChart(this.chartData,this.options)):this.renderChart(this.chartNoData,this.options)}}},S={extends:D["a"],mixins:[D["c"].reactiveData],name:"ApexGrowthLineChart",data:function(){return{chartData:{labels:[],datasets:[{label:"Indice croiss.",yAxisID:"A",fill:!1,lineTension:.1,backgroundColor:"rgba(242, 142, 146, 0.2)",borderColor:"rgb(242, 142, 146)",borderCapStyle:"square",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(242, 142, 146)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% pleine",yAxisID:"B",fill:!0,hidden:!0,lineTension:.1,backgroundColor:"rgba(247, 201, 161, 0.2)",borderColor:"rgb(247, 201, 161)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(247, 201, 161)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% ralentie",yAxisID:"B",fill:!0,hidden:!1,lineTension:.1,backgroundColor:"rgba(144, 190, 184, 0.2)",borderColor:"rgb(144, 190, 184)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(144, 190, 184)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% arrétée",yAxisID:"B",fill:!0,hidden:!0,lineTension:.1,backgroundColor:"rgba(105, 134, 143, 0.2)",borderColor:"rgb(105, 134, 143)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(105, 134, 143)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"right"},scales:{xAxes:[{ticks:{suggestedMax:5}}],yAxes:[{id:"A",type:"linear",position:"left",scaleLabel:{display:!0,labelString:"Indice croiss.",fontSize:15},ticks:{max:1,min:0,stepSize:.25}},{id:"B",type:"linear",position:"right",scaleLabel:{display:!0,labelString:"% Apex",fontSize:15},ticks:{max:100,min:0,stepSize:25}}]}}}},computed:{selectedParcelYearWeeksGrowthData:{get:function(){for(var e=this.$store.state.selectedParcelIdx,t=this.$store.state.selectedYearIdx,r=[],a=[],s=[],n=[],o=this.$store.getters.weekLabelList,i=o.length,c=0;c<i;c++){var l=this.$store.getters.getWeekMetric(e,t,c),d=parseInt(l.nbObsFullGrowth),u=parseInt(l.nbObsSlowGrowth),p=parseInt(l.nbObsStoppedGrowth),h=0,b=0,f=0,g=0,v=d+u+p;v>0&&(h=Math.round(d/v*100),b=Math.round(u/v*100),f=Math.round(p/v*100),g=(.5*b+h)/100),r.push(h),a.push(b),s.push(f),n.push(g)}var m={weekLabelList:o,prctFullGrowth:r,prctSlowGrowth:a,prctStoppedGrowth:s,icApex:n};return console.log("CALL  selectedParcelYearWeeksGrowthData "),console.log(m),m}}},watch:{selectedParcelYearWeeksGrowthData:function(e){console.log("WATCH selectedParcelYearWeeksGrowthData"),console.log(e),this.chartData.labels=e.weekLabelList,this.chartData.datasets[0].data=e.icApex,this.chartData.datasets[1].data=e.prctFullGrowth,this.chartData.datasets[2].data=e.prctSlowGrowth,this.chartData.datasets[3].data=e.prctStoppedGrowth,this.renderChart(this.chartData,this.options)}}},C={extends:D["a"],mixins:[D["c"].reactiveData],name:"ApexHydricConstraintLineChart",data:function(){return{chartData:{labels:[],datasets:[{label:"Niveau contrainte hydrique",yAxisID:"CH",fill:!0,steppedLine:"middle",lineTension:.1,backgroundColor:"rgba(151, 162, 191, 0.2)",borderColor:"rgb(151, 162, 191)",borderCapStyle:"square",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(151, 162, 191)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom"},scales:{xAxes:[{ticks:{suggestedMax:5}}],yAxes:[{id:"CH",type:"linear",position:"left",ticks:{max:3,min:0,stepSize:1,callback:function(e){switch(e){case 0:return"Absente";case 1:return"Modérée";case 2:return"Forte";case 3:return"Sévère"}}}}]}}}},computed:{selectedParcelYearWeeksHydricConstraint:{get:function(){for(var e=[],t=this.$store.state.selectedParcelIdx,r=this.$store.state.selectedYearIdx,a=this.$store.getters.weekLabelList,s=a.length,n=0;n<s;n++){var o=this.$store.getters.getWeekMetric(t,r,n),i=parseInt(o.nbObsFullGrowth),c=parseInt(o.nbObsSlowGrowth),l=parseInt(o.nbObsStoppedGrowth),d=0,u=0,p=0,h=i+c+l;h>0&&(d=Math.round(i/h*100),u=Math.round(c/h*100),p=(.5*u+d)/100);var b=3;p>=.75?b=0:u>=5?b=1:u<=90&&(b=2),h<=0&&(b=0),e.push(b)}var f={weekLabelList:a,hydricContraintList:e};return console.log("CALL  selectedParcelYearWeeksHydricConstraint "),console.log(f),f}}},watch:{selectedParcelYearWeeksHydricConstraint:function(e){console.log("WATCH selectedParcelYearWeeksData"),console.log(e),this.chartData.labels=e.weekLabelList,this.chartData.datasets[0].data=e.hydricContraintList,this.renderChart(this.chartData,this.options)}}};r("f9e3"),r("2dd8");delete w["Icon"].Default.prototype._getIconUrl,w["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")});var W={name:"ApexMap",components:{LMap:k["a"],LTileLayer:y["a"],LMarker:j["a"],LPopup:x["a"],ApexGrowthPieChart:M,ApexGrowthLineChart:S,ApexHydricConstraintLineChart:C},data:function(){return{selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",currentZoom:13,currentCenter:Object(w["latLng"])(43.6452,3.87189),mapOptions:{zoomSnap:.5},prevYearIsShowned:!1,msgPrevYear:null}},computed:{},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedParcelIdx=e.$store.state.selectedParcelIdx,e.selectedYearIdx=e.$store.state.selectedYearIdx,e.selectedWeekIdx=e.$store.state.selectedWeekIdx;case 3:case"end":return t.stop()}}),t)})))()},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e),this.parcelMarkerClick(e)},selectedYearIdx:function(e){this.$store.commit("updateSelectedYearIdx",e)},selectedWeekIdx:function(e){this.$store.commit("updateSelectedWeekIdx",e)},currentCenter:function(e){this.$refs.parcelInfoMap.setCenter(e)}},methods:{zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},innerClick:function(){alert("Click!")},getLatLng:function(e){return Object(w["latLng"])(e.lat,e.lng)},parcelMarkerClick:function(e){console.log("parcelMarkerClick pIdx: "+e),e!==this.selectedParcelIdx&&(this.selectedParcelIdx=parseInt(e));var t=this.$store.state.userDataObj.parcels[e].parcelCoord.lat,r=this.$store.state.userDataObj.parcels[e].parcelCoord.lng;this.currentCenter=Object(w["latLng"])(t,r),console.log("this.$refs.parcelInfoMap"),console.log(this.$refs.parcelInfoMap)},showPrevYear:function(e){e?0===this.selectedYearIdx?this.msgPrevYear="pas d'observations avant "+this.$store.getters.yearNumberList[this.selectedYearIdx]:(this.selectedYearIdx=this.selectedYearIdx-1,this.prevYearIsShowned=e):(this.prevYearIsShowned&&(this.selectedYearIdx=this.selectedYearIdx+1,this.prevYearIsShowned=e),this.msgPrevYear=null)},createIcon:function(e){var t=-1,r=this.$store.getters.getTotalNbObs(e,this.selectedYearIdx,this.selectedWeekIdx);r>0&&(t=this.$store.getters.getAvgGrowth(e,this.selectedYearIdx,this.selectedWeekIdx)),console.log("pIdx: "+e+" avgGrowth: "+t);var a=I.avgGrowthToGreenColor(t);return!0===this.prevYearIsShowned&&(console.log(" color pin border : "),a+="_bordered"),new w["Icon"]({iconUrl:"images/my_"+a+"_pin.png",iconSize:[22,35],iconAnchor:[0,0],popupAnchor:[0,0]})}}},Y=W,_=(r("6e2b"),r("2877")),P=Object(_["a"])(Y,v,m,!1,null,"662f30f7",null),N=P.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer"},[a("h1",[e._v(e._s(e.msg))]),a("img",{attrs:{alt:"Vue logo",src:r("cf05")}})])},L=[],T={name:"Footer",data:function(){return{msg:"Place the footer here"}}},$=T,A=(r("33e0"),Object(_["a"])($,G,L,!1,null,"2e9ae21c",null)),E=A.exports,U={name:"App",components:{ApexMap:N,Footer:E},created:function(){var e=this;try{var t=this.$store.state.loggedUserEmail;h.checkEMail(t).then((function(r){!0===r?h.getObservations(t).then((function(t){var r=h.extractUserDataObjFrom(t);console.log(r),h.addSharedParcelObservations(r).then((function(){h.addWeeksToUserDataObj(r),h.enforceConsistencyOfUserDataObj(r),h.sortUserDataObjByYearByWeek(r),e.$store.commit("initUserDataObj",r),console.log("updated $store.state.userDataObj: "),console.log(e.$store.state.userDataObj),e.$store.commit("initUserModifiedWeekMetrics")}))})):console.log("mail is not valid")}))}catch(r){this.error=r.message}}},B=U,F=(r("034f"),Object(_["a"])(B,f,g,!1,null,null,null)),z=F.exports;a["a"].config.productionTip=!1,new a["a"]({store:b,render:function(e){return e(z)}}).$mount("#app")},"6e2b":function(e,t,r){"use strict";var a=r("74e0"),s=r.n(a);s.a},"74e0":function(e,t,r){},"77d4":function(e,t,r){},"85ec":function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.675a1fdd.js.map