(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},s={app:0},n=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00d1":function(e,t,r){"use strict";var a=r("c87d"),s=r.n(a);s.a},"034f":function(e,t,r){"use strict";var a=r("85ec"),s=r.n(a);s.a},"08bc":function(e,t,r){"use strict";var a=r("fb16"),s=r.n(a);s.a},1125:function(e,t,r){},"1a77":function(e,t,r){},"3e46":function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("6cc5");var a=r("2b0e"),s=(r("99af"),r("c740"),r("d81d"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("b85c")),n=(r("96cf"),r("1da1")),i=r("2f62"),o=(r("7db0"),r("4160"),r("b0c0"),r("b64b"),r("25f0"),r("159b"),r("d4ec")),c=r("bee2"),l=r("bc3a"),d=r.n(l);r("ed18").config();var u="db-services";var p=function(){function e(){Object(o["a"])(this,e)}return Object(c["a"])(e,null,[{key:"pwsadd",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{null!==t&&null!=t.transaction&&"alter_password"===t.transaction?d.a.post(u+"/password",t).then((function(t){e(t.affectedRows)})):r(" ERROR  does not accept "+t)}catch(a){r(a)}})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkEMail",value:function(t){console.log("Checking email in Apex Vignes user Table :"+t);var r={transaction:"select_useremail",userEMail:t};return new Promise((function(a,s){try{d.a.post(u+"/login",r).then((function(r){void 0!==r.data&&r.data.length>0?(console.log("mail registered in table user"),a(!0)):(console.log("mail not registered in table user"),e.checkEMailAuth(t).then((function(e){a(e)})))}))}catch(n){s(n)}}))}},{key:"checkEMailAuth",value:function(e){console.log("Checking email in Apex Territoire authentification table :"+e);var t={transaction:"select_useremailAuth",userEMail:e};return new Promise((function(e,r){try{d.a.post(u+"/checkAuth",t).then((function(t){null!==t&&t.data.length>0?(console.log("mail registered in table auth"),e(!0)):(console.log("mail not registered in table auth"),e(!1))}))}catch(a){r(a)}}))}},{key:"checkpasswordRequire",value:function(e){console.log("checkpasswordRequire "+e);var t={transaction:"select_passwordRequireAuth",userEMail:e};return new Promise((function(e,r){try{d.a.post(u+"/checkAuth",t).then((function(t){void 0!==t&&(1===t.data[0].passwordRequire?(console.log("passwordRequire exists"),e(!0)):(console.log("passwordRequire does not exists"),e(!1)))}))}catch(a){r(a)}}))}},{key:"checkPassword",value:function(e,t){var r={transaction:"check_passwordLogin",password:e,UserEMail:t};return new Promise((function(e,t){try{d.a.post(u+"/password",r).then((function(t){console.log("checkPassword result form call to db: "),console.log(t),t&&!0===t.data?e(!0):e(!1)}))}catch(a){t(a)}}))}},{key:"mailAddToAuth",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={transaction:"insert_userEmail",userEMail:t,password:null,passwordRequire:0},e.abrupt("return",d.a.post(u+"/checkAuth",r).then((function(e){console.log("mailAddToAuth result from DB"),console.log(e),e&&e.data.affectedRows>0?console.log("mail a été ajouté"):console.log("non ajouté")})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getUserInfo "+t),r={userEMail:t,userName:t,userId:-1,userExistsInUserTable:!1,userExistsInAuthTable:!1,userRequiredPassword:!1},e.prev=2,a={transaction:"select_useremail",userEMail:t},console.log("select_useremail from user table "+t),e.next=7,d.a.post(u+"/login",a);case 7:return s=e.sent,void 0!==s.data&&s.data.length>0&&(console.log("res_select_useremailUser.data"),console.log(s.data),s.data.length>1&&console.log("WARNING mail corresponds to more than one row in Apex Vignes, we keep the first row"),r.userName=s.data[0].name,r.userId=s.data[0].idUser,r.userExistsInUserTable=!0),n={transaction:"select_useremailAuth",userEMail:t},console.log("select_useremail from authentification table "+t),e.next=13,d.a.post(u+"/checkAuth",n);case 13:return i=e.sent,null!==i&&i.data.length>0&&(console.log("res_select_useremailAuth.data"),console.log(i.data),r.userName===r.userEMail&&(r.userName=i.data[0].userName),r.userExistsInAuthTable=!0,r.userRequiredPassword=i.data[0].passwordRequire),r.userName||(r.userName=r.userEMail),e.abrupt("return",r);case 19:return e.prev=19,e.t0=e["catch"](2),console.log(e.t0),e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getObservations",value:function(e){return console.log("getObservations of "+e),new Promise((function(t,r){try{var a={transaction:"select_observations",userEMail:e};d.a.post(u,a).then((function(e){t(e.data)}))}catch(s){r(s)}}))}},{key:"getSharedObservations",value:function(e,t){return console.log("getSharedObservations of  "+e+" from "+t),new Promise((function(r,a){try{var s={transaction:"select_sharedobservations",dataOwnerEMail:e,parcelName:t};d.a.post(u,s).then((function(e){r(e.data)}))}catch(n){a(n)}}))}},{key:"getModifiedWeekMetrics",value:function(e){return console.log("getmodifiedWeekMetrics from "+e),new Promise((function(t,r){try{var a={transaction:"select_modifiedweekmetrics",dataUserEMail:e};d.a.post(u,a).then((function(e){t(e.data)}))}catch(s){r(s)}}))}},{key:"sendToModifiedWeekMetrics",value:function(e){return console.log(e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_modifiedweekmetrics"===e.transaction||"alter_modifiedweekmetrics"===e.transaction||"delete_modifiedweekmetrics"===e.transaction)?("select_modifiedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.data)})),"alter_modifiedweekmetrics"===e.transaction&&(console.log(e),d.a.post(u,e).then((function(e){t(e.affectedRows)}))),"delete_modifiedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedRows)}))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"sendToInitializedWeekMetrics",value:function(e){return console.log(e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_initializedweekmetrics"===e.transaction||"alter_initializedweekmetrics"===e.transaction||"delete_initializedweekmetrics"===e.transaction)?("select_initializedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.data)})),"alter_initializedweekmetrics"===e.transaction&&(console.log(e),d.a.post(u,e).then((function(e){t(e.affectedRows)}))),"delete_initializedweekmetrics"===e.transaction&&d.a.post(u,e).then((function(e){t(e.affectedRows)}))):r(" ERROR sendToInitializedWeekMetrics does not accept "+e)}catch(a){r(a)}}))}},{key:"sendToParcelDataSharing",value:function(e){return new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_parceldatasharing"===e.transaction||"insert_parceldatasharing"===e.transaction||"delete_parceldatasharing"===e.transaction)?("select_parceldatasharing"===e.transaction&&d.a.post(u,e).then((function(e){t(e.data)})),"insert_parceldatasharing"===e.transaction&&(console.log(e),d.a.post(u,e).then((function(e){t(e.affectedRows)}))),"delete_parceldatasharing"===e.transaction&&(console.log(e),console.log(e.dataOwnerEMail),console.log(e.dataUserEMail),console.log(e.parcelName),d.a.post(u,e).then((function(r){console.log(e),t(r.affectedRows,console.log("ok"))})))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"postQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,a){try{d.a.post(e,t).then((function(e){r(e)}))}catch(s){a(s)}}))}},{key:"deleteQuery",value:function(e){return d.a.delete(u,e)}},{key:"getMonthLabel",value:function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return}}},{key:"getDayLabel",value:function(e){switch(e){case"1":return"Mon";case"2":return"Tue";case"3":return"Wed";case"4":return"Thu";case"5":return"Fri";case"6":return"Sat";case"0":return"Sun";default:return}}},{key:"extractUserDataObjFrom",value:function(t){console.log("extractUserDataObjFrom : nbRows: "+t.length);var r={};return t.forEach((function(t){void 0===r.userEMail&&(r=new e.MonitoredUser(t.userEMail,t.userId,t.userName));var a=r.parcels.find((function(e){return e.parcelName===t.parcelName}));void 0===a&&(a=new e.MonitoredParcel(t.parcelName,t.userEMail,t.userName,t.userId,{lat:t.parcelLat,lng:t.parcelLng}),r.parcels.push(a));var s=new Date;s.setTime(t.sessionDateInSec+"000");var n=s.getFullYear(),i=a.parcelYears.find((function(e){return e.yearNumber===n}));void 0===i&&(i=new e.MonitoredYear(n),a.parcelYears.push(i));var o=new Date(n,0,1),c=864e5,l=c*(1===o.getDay()?0:0===o.getDay()?1:8-o.getDay()),d=new Date;d.setTime(o.getTime()+l);var u=s.getTime()===d.getTime()?1:Math.ceil((s.getTime()-d.getTime())/c/7),p=s.getTime()-c*(1===s.getDay()?0:0===s.getDay()?6:s.getDay()-1),m=new Date;m.setTime(p);var h=i.yearWeeks.find((function(e){return e.weekNumber===u}));void 0===h&&(h=new e.MonitoredWeek(t.sessionDateInSec+"000"),i.yearWeeks.push(h));var b=h.weekSessions.find((function(e){return e.sessionDateInMs===t.sessionDateInSec+"000"}));void 0===b&&(b=new e.MonitoredSession(t.sessionDateInSec+"000"),h.weekSessions.push(b));var f=new e.MonitoredObservation(t.obsvLabel,t.obsvDateInMs,t.userName,t.userName,{lat:t.obsvLat,lng:t.obsvLng});b.sessionObservations.push(f)})),r}},{key:"addParcelObservations",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getObservations(r.userEMail);case 3:a=t.sent,s=e.extractUserDataObjFrom(a),Object.keys(s).length>0&&s.parcels.forEach((function(e){return r.parcels.push(e)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addSharedParcelObservations",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,n,i,o,c,l,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("addSharedParcelObservations"),t.next=3,e.sendToParcelDataSharing({transaction:"select_parceldatasharing",userEMail:r.userEMail});case 3:a=t.sent,console.log("sharedParcelDBRows result"),console.log(a),n=Object(s["a"])(a),t.prev=7,n.s();case 9:if((i=n.n()).done){t.next=25;break}return o=i.value,t.next=13,e.getSharedObservations(o.dataOwnerEMail,o.parcelName);case 13:return c=t.sent,c.length>0&&(l=e.extractUserDataObjFrom(c),r.parcels.push(l.parcels[0])),t.next=17,e.sendToInitializedWeekMetrics({transaction:"select_initializedweekmetrics",dataOwnerEMail:o.dataOwnerEMail,parcelName:o.parcelName});case 17:return d=t.sent,e.addWeekMetricsDBRows(r,d),t.next=21,e.sendToModifiedWeekMetrics({transaction:"select_modifiedweekmetrics",dataUserEMail:o.dataOwnerEMail,dataOwnerEMail:o.dataOwnerEMail,parcelName:o.parcelName});case 21:u=t.sent,e.addWeekMetricsDBRows(r,u);case 23:t.next=9;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](7),n.e(t.t0);case 30:return t.prev=30,n.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[7,27,30,33]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addInitializedWeekMetrics",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("addInitializedWeekMetrics"),t.next=3,e.sendToInitializedWeekMetrics({transaction:"select_initializedweekmetrics",dataOwnerEMail:r.userEMail});case 3:a=t.sent,e.addWeekMetricsDBRows(r,a);case 5:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addWeekMetricsDBRows",value:function(t,r){console.log("addWeekMetricsDBRows"),console.log(r);var a,n=Object(s["a"])(r);try{var i=function(){var r=a.value,s=t.parcels.find((function(e){return e.parcelName===r.parcelName&&e.dataOwnerEMail===r.dataOwnerEMail}));s||(s=new e.MonitoredParcel(r.parcelName,r.dataOwnerEMail,r.dataOwnerName?r.dataOwnerName:t.userName,-1,{lat:r.parcelLat,lng:r.parcelLng}),t.parcels.push(s));var n=s.parcelYears.find((function(e){return e.yearNumber===r.yearNumber}));n||(n=new e.MonitoredYear(r.yearNumber),s.parcelYears.push(n));var i=n.yearWeeks.find((function(e){return e.weekNumber===r.weekNumber}));i||(i=new e.MonitoredWeek(n.yearNumber,r.weekNumber),i.weekNbObsFullGrowth=r.nbObsFullGrowth,i.weekNbObsSlowGrowth=r.nbObsSlowGrowth,i.weekNbObsStoppedGrowth=r.nbObsStoppedGrowth,n.yearWeeks.push(i))};for(n.s();!(a=n.n()).done;)i()}catch(o){n.e(o)}finally{n.f()}}},{key:"addWeeksToUserDataObj",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2019,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2020,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;if(console.log("addWeeksToUserDataObj "),void 0===t.parcels||0===t.parcels.length)throw" No parcels is currently monitored by the user";for(var i=[],o=[],c=0;c<t.parcels.length;c++){var l=t.parcels[c];if(void 0!==l.parcelYears)for(var d=function(e){var t=l.parcelYears[e].yearNumber;void 0===i.find((function(e){return e===t}))&&i.push(t)},u=0;u<l.parcelYears.length;u++)d(u);for(var p=function(e){void 0===i.find((function(t){return t===e}))&&i.push(e)},m=r;m<=a;m++)p(m);if(void 0!==l.parcelYears)for(var h=0;h<l.parcelYears.length;h++)if(void 0!==l.parcelYears[h].yearWeeks)for(var b=function(e){var t=l.parcelYears[h].yearWeeks[e].weekNumber;void 0===o.find((function(e){return e===t}))&&o.push(t)},f=0;f<l.parcelYears[h].yearWeeks.length;f++)b(f);for(var v=function(e){void 0===o.find((function(t){return t===e}))&&o.push(e)},g=s;g<=n;g++)v(g)}for(var w=0;w<t.parcels.length;w++)for(var k=t.parcels[w],x=function(t){var r=i[t],a=k.parcelYears.find((function(e){return e.yearNumber===r}));void 0===a&&(a=new e.MonitoredYear(r),k.parcelYears.push(a));for(var s=function(t){var s=o[t],n=a.yearWeeks.find((function(e){return e.weekNumber===s}));void 0===n&&(n=new e.MonitoredWeek(r,s),a.yearWeeks.push(n))},n=0;n<o.length;n++)s(n)},_=0;_<i.length;_++)x(_)}},{key:"enforceConsistencyOfUserDataObj",value:function(e){if(console.log("enforceConsistencyOfUserDataObj "),void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0)for(var a=0;a<r.parcelYears.length;a++){var s=r.parcelYears[a];if(void 0!==s.yearWeeks&&s.yearWeeks.length>0)for(var n=0;n<s.yearWeeks.length;n++){var i=s.yearWeeks[n],o=0,c=0,l=0,d=0;if(this.weekICApex=0,void 0!==i.weekSessions&&i.weekSessions.length>0)for(var u=0;u<i.weekSessions.length;u++){var p=i.weekSessions[u],m=0,h=0;if(void 0!==p.sessionObservations){for(var b=0;b<p.sessionObservations.length;b++){var f=p.sessionObservations[b];"P"===f.obsvLabel&&c++,"R"===f.obsvLabel&&l++,"C"===f.obsvLabel&&d++,m+=f.obsvValue,h++,o++}h>0&&(p.sessionAVGrowth=m/h)}}o>0&&(i.weekNbObsFullGrowth=c,i.weekNbObsSlowGrowth=l,i.weekNbObsStoppedGrowth=d),i.weekNbObservations=i.weekNbObsFullGrowth+i.weekNbObsSlowGrowth+i.weekNbObsStoppedGrowth,i.weekNbObservations>0&&(i.weekAVGrowth=Math.round(100*(i.weekNbObsFullGrowth+.5*i.weekNbObsSlowGrowth)/i.weekNbObservations)/100,i.weekPrctFullGrowth=Math.round(1e4*i.weekNbObsFullGrowth/i.weekNbObservations)/100,i.weekPrctSlowGrowth=Math.round(1e4*i.weekNbObsSlowGrowth/i.weekNbObservations)/100,i.weekPrctStoppedGrowth=Math.round(1e4*i.weekNbObsStoppedGrowth/i.weekNbObservations)/100,i.weekICApex=i.weekAVGrowth)}}}}},{key:"sortUserDataObjByYearByWeek",value:function(e){if(void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0){for(var a=0;a<r.parcelYears.length;a++){var s=r.parcelYears[a];void 0!==s.yearWeeks&&s.yearWeeks.length>0&&s.yearWeeks.sort((function(e,t){return e.weekNumber-t.weekNumber}))}r.parcelYears.sort((function(e,t){return e.yearNumber-t.yearNumber}))}}}},{key:"MonitoredUser",value:function(e,t,r){var a=this;this.userEMail=e,this.userId=t,this.userName=r,this.parcels=[],this.toString=function(){return"user: email ".concat(a.userEMail," id: ").concat(a.userId," name ").concat(a.userName)}}},{key:"MonitoredParcel",value:function(e,t,r,a,s){var n=this;this.parcelName=e,this.dataOwnerEMail=t,this.dataOwnerName=r,this.dataOwnerId=a,this.parcelCoord=s,this.parcelYears=[],this.toString=function(){return"parcel: "+n.parcelName}}},{key:"MonitoredYear",value:function(e){this.yearNumber=e,this.yearWeeks=[],this.toString=function(){return"year: ".concat(this.yearNumber)}}},{key:"MonitoredWeek",value:function(t,r){var a=this;if(this.weekNumber=0,this.weekLabel="",this.weekFullDate=new Date,this.weekSessions=[],this.weekNbObservations=0,this.weekNbObsFullGrowth=0,this.weekNbObsSlowGrowth=0,this.weekNbObsStoppedGrowth=0,this.weekPrctFullGrowth=0,this.weekPrctSlowGrowth=0,this.weekPrctStoppedGrowth=0,this.weekAVGrowth=0,this.weekICApex=0,this.toString=function(){return"w"+a.weekNumber+"("+a.weekLabel+")"},void 0===r){var s=t,n=new Date;n.setTime(s);var i=new Date(n.getFullYear(),0,1),o=864e5,c=o*(1===i.getDay()?0:0===i.getDay()?1:8-i.getDay()),l=new Date;l.setTime(i.getTime()+c);var d=n.getTime()===l.getTime()?1:Math.ceil((n.getTime()-l.getTime())/o/7),u=n.getTime()-o*(1===n.getDay()?0:0===n.getDay()?6:n.getDay()-1),p=new Date;p.setTime(u);var m=p.getDate()+" "+e.getMonthLabel(p.getMonth());this.weekNumber=d,this.weekLabel=m,this.weekFullDate=p.toString()}else{var h=t,b=r,f=new Date(h,0,1),v=864e5,g=v*(1===f.getDay()?0:0===f.getDay()?1:8-f.getDay()),w=new Date;w.setTime(f.getTime()+g);var k=w.getTime()+7*v*(b-1),x=new Date;x.setTime(k);var _=x.getDate()+" "+e.getMonthLabel(x.getMonth());this.weekNumber=b,this.weekLabel=_,this.weekFullDate=x.toString()}this.reInitICApex=function(){var e=3;return this.weekAVGrowth>=.75?e=0:this.weekPrctFullGrowth>=5?e=1:this.weekPrctSlowGrowth<=90&&(e=2),e}}},{key:"MonitoredSession",value:function(t){var r=new Date;r.setTime(t),this.sessionDateInMs=t,this.sessionDateLabel=r.getDate()+" "+e.getMonthLabel(r.getMonth())+" "+r.getFullYear(),this.sessionAVGrowth=0,this.sessionICApex=0,this.sessionObservations=[]}},{key:"MonitoredObservation",value:function(e,t,r,a,s){this.initObsvValueFromLabel=function(e){switch(e){case"P":return 1;case"R":return.5;case"C":return 0;default:return}},this.obsvLabel=e,this.obsvValue=this.initObsvValueFromLabel(e),this.obsvDateInMs=t,this.obsvOwnerName=r,this.obsvUserName=a,this.obsvCoord=s}}]),e}(),m=p,h=r("0e44");a["default"].use(i["a"]);var b=function(){return{activedNavbar:"",navbarModel:"",mailpresent:"",PasswordRequire:"",loggedUserEmail:"",demoUserEMail:"",userDataObj:null,selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,userModifiedWeekMetrics:new Map,forceComponentUpdateCounter:0,viewMode:"developpement",strict:!0,plugins:[Object(h["a"])()]}},f=new i["a"].Store({state:{navbarModel:"",activedNavbar:"",mailpresent:"",PasswordRequire:"",loggedUserEmail:"",demoUserEmail:"",userDataObj:null,selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,userModifiedWeekMetrics:new Map,forceComponentUpdateCounter:0,viewMode:"developpement",strict:!0,plugins:[Object(h["a"])()]},getters:{getDisplayedUserEMail:function(e){return e.demoUserEmail?"visiteur.demo@apex-territoire.fr":e.loggedUserEmail},getDisplayedUserName:function(e){return e.demoUserEmail?"Visiteur":e.userDataObj?e.userDataObj.userName:"No userName"},getDisplayedUserNameIfNeeded:function(e){return function(t,r){return e.demoUserEmail&&t===e.demoUserEmail?"Visiteur":r}},parcelNameList:function(e){return null===e.userDataObj?[]:null!==e.userDataObj.parcels?e.userDataObj.parcels.map((function(e){return e.parcelName})):void 0},yearNumberList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears.map((function(e){return e.yearNumber})):[]},weekLabelList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks.map((function(e){return e.weekLabel})):[]},getParcelIdx:function(e){return function(t,r){return null!==e.userDataObj?e.userDataObj.parcels.findIndex((function(e){return e.parcelName===t&&e.dataOwnerEMail===r})):null}},getYearIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears.findIndex((function(e){return e.yearNumber===t})):-1}},getWeekIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(e){return e.weekNumber===t})):-1}},getSelectedWeekMetric:function(e,t){return t.getWeekMetric(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getWeekMetric:function(e){return function(t,r,a){var s="pIdx:".concat(t," yIdx:").concat(r," wIdx:").concat(a);if(e.userModifiedWeekMetrics.has(s))return e.userModifiedWeekMetrics.get(s);e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx];var n=new Date(e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekFullDate),i={dataUserEMail:e.userDataObj.userEMail,dataOwnerEMail:e.userDataObj.parcels[t].dataOwnerEMail,parcelName:e.userDataObj.parcels[t].parcelName,yearNumber:e.userDataObj.parcels[t].parcelYears[r].yearNumber,weekNumber:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNumber,nbObsFullGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsFullGrowth,nbObsSlowGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsSlowGrowth,nbObsStoppedGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsStoppedGrowth,dateTimeInMs:n.getTime(),modified:!1};return i}},getSelectedWeekMetricTotalNbObs:function(e,t){return t.getTotalNbObs(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getTotalNbObs:function(e,t){return function(e,r,a){var s=t.getWeekMetric(e,r,a),n=parseInt(s.nbObsFullGrowth),i=parseInt(s.nbObsSlowGrowth),o=parseInt(s.nbObsStoppedGrowth);return n+i+o}},getSelectedWeekMetricAvgGrowth:function(e,t){return t.getAvgGrowth(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getAvgGrowth:function(e,t){return function(e,r,a){var s=t.getWeekMetric(e,r,a),n=parseInt(s.nbObsFullGrowth),i=parseInt(s.nbObsSlowGrowth),o=parseInt(s.nbObsStoppedGrowth),c=n+i+o;return 0==c?0:Math.round(100*(n+.5*i)/c)/100}},getSelectedWeekMetricHydricConstraint:function(e,t){return t.getHydricConstraint(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getHydricConstraint:function(e,t){return function(e,r,a){var s=t.getWeekMetric(e,r,a),n=parseInt(s.nbObsFullGrowth),i=parseInt(s.nbObsSlowGrowth),o=parseInt(s.nbObsStoppedGrowth),c=n+i+o,l=0,d=0,u=0;c>0&&(l=Math.round(n/c*100),d=Math.round(i/c*100),u=(.5*d+l)/100);var p=3;return u>=.75?p=0:d>=5?p=1:d<=90&&(p=2),0==c?0:p}}},mutations:{RESET:function(e){Object.assign(e,b())},initNavbarModel:function(e,t){e.navbarModel=t},initActivedNavbar:function(e,t){e.activedNavbar=t},initPasswordRequire:function(e,t){e.PasswordRequire=t},initmailpresent:function(e,t){e.mailpresent=t},initLoggedUserEmail:function(e,t){e.loggedUserEmail=t},initDemoUserEmail:function(e,t){e.demoUserEmail=t},initUserDataObj:function(e,t){e.userDataObj=t},updateSelectedParcelIdx:function(e,t){e.selectedParcelIdx=t,console.log(" store updated state.selectedParcelIdx "+e.selectedParcelIdx)},updateSelectedYearIdx:function(e,t){e.selectedYearIdx=t,console.log(" store updated state.selectedYearIdx "+e.selectedYearIdx)},updateSelectedWeekIdx:function(e,t){e.selectedWeekIdx=t,console.log(" store updated state.selectedWeekIdx "+e.selectedWeekIdx)},incrementForceComponentUpdateCounter:function(e){e.forceComponentUpdateCounter=e.forceComponentUpdateCounter+1}},actions:{login:function(e,t){var r=e.commit,a=t.loggedUserEmail;r("initLoggedUserEmail",a)},logout:function(e){var t=e.commit;t("RESET","")},initUserModifiedWeekMetrics:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.next=3,m.sendToModifiedWeekMetrics({transaction:"select_modifiedweekmetrics",dataUserEMail:r.userDataObj.userEMail});case 3:a=t.sent,n=Object(s["a"])(a);try{for(o=function(){var e=i.value,t=r.userDataObj.parcels.findIndex((function(t){return t.parcelName===e.parcelName&&t.dataOwnerEMail===e.dataOwnerEMail})),a=r.userDataObj.parcels[0].parcelYears.findIndex((function(t){return t.yearNumber===e.yearNumber})),s=r.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(t){return t.weekNumber===e.weekNumber}));e.modified=!0,r.userModifiedWeekMetrics.set("pIdx:".concat(t," yIdx:").concat(a," wIdx:").concat(s),e)},n.s();!(i=n.n()).done;)o()}catch(c){n.e(c)}finally{n.f()}console.log("state.userModifiedWeekMetrics"),console.log(r.userModifiedWeekMetrics);case 8:case"end":return t.stop()}}),t)})))()},saveSelectedWeekMetric:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.state,t.modified=!0,a.userModifiedWeekMetrics.set("pIdx:".concat(a.selectedParcelIdx," yIdx:").concat(a.selectedYearIdx," wIdx:").concat(a.selectedWeekIdx),t),!a.demoUserEmail){r.next=6;break}return console.log(" saveSelectedWeekMetric: update are kept only for the time of the user session"),r.abrupt("return");case 6:t.transaction="alter_modifiedweekmetrics",m.sendToModifiedWeekMetrics(t).then((function(e){console.log("Inserted or Updated affectedRows in TABLE modifiedWeekMetrics"+e)}));case 8:case"end":return r.stop()}}),r)})))()},deleteSelectedWeekMetric:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.state,!t.modified){r.next=10;break}if(a.userModifiedWeekMetrics.delete("pIdx:".concat(a.selectedParcelIdx," yIdx:").concat(a.selectedYearIdx," wIdx:").concat(a.selectedWeekIdx),t),!a.demoUserEmail){r.next=6;break}return console.log(" deleteSelectedWeekMetric: delete are considered only for the time of the user session"),r.abrupt("return");case 6:t.transaction="delete_modifiedweekmetrics",m.sendToModifiedWeekMetrics(t).then((function(e){console.log("Deleted affectedRows in TABLE modifiedWeekMetrics"+e)})),r.next=11;break;case 10:console.log(" week metric have not been modified it will deleted userModifiedWeekMetrics or in BD ");case 11:case"end":return r.stop()}}),r)})))()}}}),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},["/"!==e.$router.currentRoute.path?r("div",{attrs:{id:"header "}},[r("my-header")],1):e._e(),"/"!==e.$router.currentRoute.path?r("div",{attrs:{id:"navbar"}},[r("navbar")],1):e._e(),r("router-view"),r("div",{attrs:{id:"footer "}},[r("my-footer")],1)],1)},g=[],w=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"footer"},[r("div",{staticClass:"icones"},[r("a",{staticClass:"btn-floating btn-sm btn-fb mx-1",attrs:{href:"https://www.montpellier-supagro.fr/ ",target:"_blank"}},[r("i",[r("img",{attrs:{src:"images/supagro.png"}})])]),r("a",{staticClass:"btn-floating btn-sm btn-fb mx-1",attrs:{href:"https://www.hdigitag.fr/fr/ ",target:"_blank"}},[r("i",[r("img",{attrs:{src:"images/Digitag.png"}})])]),r("a",{staticClass:"btn-floating btn-sm btn-fb mx-1",attrs:{href:"http://www.inrae.fr",target:"_blank"}},[r("i",[r("img",{attrs:{src:"images/inrae.png",target:"_blank"}})])]),r("a",{staticClass:"btn-floating btn-sm btn-fb mx-1",attrs:{href:"https://muse.edu.umontpellier.fr/",target:"_blank"}},[r("i",[r("img",{attrs:{src:"images/Logo_MUSE.png"}})])])]),r("div",{staticClass:"copyright "},[e._v(" © 2020 Copyright: "),r("a",{attrs:{href:"https://www.inrae.fr/centres/occitanie-montpellier",target:"_blank"}},[e._v(" INRAE OCCITANIE MONTPELLIER")])])])}],x={name:"Footer",components:{}},_=x,y=(r("00d1"),r("2877")),M=Object(y["a"])(_,w,k,!1,null,"ba088d88",null),I=M.exports,O=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header",staticStyle:{"background-image":"url(images/tuscany-vigne.jpg)","background-size":"2000px 180px"}},[r("h1",[e._v("ApeX Territoire")])])}],j={name:"Header",components:{}},S=j,$=(r("8996"),Object(y["a"])(S,O,C,!1,null,"78bfd9ef",null)),D=$.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.state.activedNavbar?r("div",{staticClass:"topnav"},[0===e.$store.state.navbarModel?r("div",[r("router-link",{staticClass:"nav-link",attrs:{to:"/map"}},[e._v("Carte")]),r("router-link",{staticClass:"nav-link",attrs:{to:"/edit"}},[e._v("Editer")]),r("router-link",{staticClass:"nav-link",attrs:{to:"/partage"}},[e._v("Partager")]),r("router-link",{staticClass:"nav-link",attrs:{to:"/export"}},[e._v("Exporter")]),r("router-link",{staticClass:"nav-link",attrs:{to:"/profil"}},[e._v("Authentification")]),r("router-link",{staticClass:"nav-link",attrs:{to:"/guide"}},[e._v("Guide")]),r("a",{staticClass:"nav-link",attrs:{id:"exit",href:""},on:{click:e.logout}},[e._v("Déconnexion")])],1):r("div",[r("b-navbar",{staticStyle:{width:"100%"},attrs:{toggleable:"",type:"dark",variant:"dark"}},[r("b-navbar-brand",{attrs:{href:"#"}},[e._v("Menu")]),r("b-navbar-toggle",{attrs:{target:"navbar-toggle-collapse"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.expanded;return[r("b-icon",t?{attrs:{icon:"chevron-bar-up"}}:{attrs:{icon:"chevron-bar-down"}})]}}],null,!1,1828389767)}),r("b-collapse",{attrs:{id:"navbar-toggle-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{attrs:{href:"#/map"}},[e._v("Carte")]),r("b-nav-item",{attrs:{href:"#/edit"}},[e._v("Editer")]),r("b-nav-item",{attrs:{href:"#/partage"}},[e._v("Partager")]),r("b-nav-item",{attrs:{href:"#/export"}},[e._v("Exporter")]),r("b-nav-item",{attrs:{href:"#/profil"}},[e._v("Authentification")]),r("b-nav-item",{attrs:{href:"#/guide"}},[e._v("Guide")]),r("b-nav-item",{attrs:{href:""},on:{click:e.logout}},[e._v("Déconnexion")])],1)],1)],1)],1)]):e._e()},E=[],W={name:"NavBar",components:{},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.innerWidth<900&&(r=1,e.$store.commit("initNavbarModel",r)),window.innerWidth>=900&&(a=0,e.$store.commit("initNavbarModel",a));case 2:case"end":return t.stop()}}),t)})))()},methods:{logout:function(){this.$store.dispatch("logout");var e="";this.$store.commit("initmailpresent",e);var t="";this.$store.commit("initPasswordRequire",t);var r="";this.$store.commit("initActivedNavbar",r);var a=0;this.$store.commit("initNavbarModel",a),this.$router.push("/")}}},P=W,U=(r("69af"),Object(y["a"])(P,N,E,!1,null,"5d0c955f",null)),R=U.exports,L={name:"App",components:{"my-footer":I,"my-header":D,navbar:R}},A=L,G=(r("034f"),Object(y["a"])(A,v,g,!1,null,null,null)),Y=G.exports,T=r("8c4f"),B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{staticClass:"global",attrs:{id:"ApexMap"}},[r("div",{staticClass:"menu"},[r("div",{attrs:{id:"campagne "}},[r("b",[e._v("Campagne :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYearIdx,expression:"selectedYearIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYearIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.yearNumberList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"semaine"}},[r("b",[e._v("Semaine :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWeekIdx,expression:"selectedWeekIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedWeekIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.weekLabelList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{attrs:{id:" parcelle"}},[r("b",[e._v("Parcelle :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedParcelIdx,expression:"selectedParcelIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedParcelIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.parcelNameList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ("+e._s(e.$store.getters.getDisplayedUserNameIfNeeded(e.$store.state.userDataObj.parcels[a].dataOwnerEMail,e.$store.state.userDataObj.parcels[a].dataOwnerName))+") ")])})),0)]),r("div",{attrs:{id:"campagnepr"}},[r("button",{staticClass:"btn btn-dark",attrs:{id:"viewPrevYear"},on:{mouseover:function(t){return e.showPrevYear(!0)},mouseout:function(t){return e.showPrevYear(!1)}}},[r("i",{staticClass:"far fa-eye"}),e._v(" campagne précédente ")]),r("p",[null!==e.msgPrevYear?r("label",[e._v(" "+e._s(e.msgPrevYear)+" ")]):e._e()])])]),r("hr"),r("div",{staticClass:"map"},["debug"===e.$store.state.viewMode?r("div",{staticClass:"headermap"},[r("p",{staticClass:"text"},[e._v(" "+e._s("nbObsFullGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsFullGrowth+", nbObsSlowGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsSlowGrowth+", nbObsStoppedGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsStoppedGrowth+", (modified: "+e.$store.getters.getSelectedWeekMetric.modified+")")+" ")]),r("p",{staticClass:"text"},[e._v(" "+e._s("currentzoom: "+e.currentZoom+", currentCenter: "+e.currentCenter+")")+" ")])]):e._e(),r("div",{staticClass:"bodymap"},[r("l-map",{ref:"parcelInfoMap",staticStyle:{height:"100%"},attrs:{zoom:e.currentZoom,center:e.currentCenter,options:e.mapOptions},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate,click:e.showCoord}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.$store.state.userDataObj.parcels,(function(t,a){return r("div",{key:a,staticClass:"parcels",attrs:{item:t,index:a}},[r("l-marker",{attrs:{"lat-lng":e.getLatLng(t.parcelCoord),icon:e.createIcon(a)},on:{click:function(t){return e.parcelMarkerClick(a)}}},[r("l-popup",[r("div",[r("p",{staticClass:"text",staticStyle:{"text-align":"left"}},[r("b",[e._v(" parcelle")]),e._v(" : "+e._s(t.parcelName)+" "),r("br"),r("b",[e._v("observateur")]),e._v(" : ("+e._s(e.$store.getters.getDisplayedUserNameIfNeeded(e.$store.state.userDataObj.parcels[a].dataOwnerEMail,e.$store.state.userDataObj.parcels[a].dataOwnerName))+") "),r("br"),r("b",[e._v("semaine du ")]),e._v(": "+e._s(e.$store.getters.weekLabelList[e.selectedWeekIdx])+" "+e._s(e.$store.getters.yearNumberList[e.selectedYearIdx])),r("br"),e.$store.getters.getSelectedWeekMetricTotalNbObs>0?[r("b",[e._v("Contrainte hydrique")]),e._v(" : "+e._s(e.$store.getters.getSelectedWeekMetricHydricConstraint)+" "),r("br"),r("b",[e._v("Indice de croissance")]),e._v(" : "+e._s(e.$store.getters.getSelectedWeekMetricAvgGrowth)+" "),r("br"),r("b",[e._v("observations")]),e._v(" : "+e._s(e.$store.getters.getSelectedWeekMetricTotalNbObs)+" "),r("br"),e._v(" # Pleine croissance : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsFullGrowth)+" "),r("br"),e._v(" # Croissance ralentie : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsSlowGrowth)+" "),r("br"),e._v(" # Croissance arrêtée : "+e._s(e.$store.getters.getSelectedWeekMetric.nbObsStoppedGrowth)+" "),r("br")]:[e._v(" (pas d'observations)"),r("br")],r("a",{staticStyle:{"text-align":"center"},attrs:{href:"#/edit"}},[e._v("éditer")])],2)])])],1)],1)}))],2)],1)]),r("div",{staticClass:"graphe"},[r("div",{attrs:{id:"title"}},[r("p",{staticStyle:{"font-size":"20px"}},[e._v(" Parcelle: "+e._s(this.$store.getters.parcelNameList[this.$store.state.selectedParcelIdx])+" ")])]),r("hr"),r("div",{attrs:{id:"graphe1"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Croissance des apex semaine du "+e._s(this.$store.getters.weekLabelList[this.$store.state.selectedWeekIdx])+" "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" ")]),r("apex-growth-pie-chart",{staticClass:"item"})],1),r("hr"),r("div",{attrs:{id:"graphe2"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la croissance des apex "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-growth-line-chart",{staticClass:"item"})],1)]),r("hr"),r("div",{attrs:{id:"graphe3"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la contrainte hydrique "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-hydric-constraint-line-chart",{staticClass:"item"})],1)]),r("hr"),r("router-link",{staticClass:"nav-link",attrs:{to:"/edit"}},[e._v("éditer")])],1)]):e._e()},z=[],F=r("e11e"),q=r("2699"),H=r("a40a"),V=r("4e2b"),J=r("f60f"),X=function(){function e(){Object(o["a"])(this,e)}return Object(c["a"])(e,null,[{key:"avgGrowthToGreenColor",value:function(e){return e<0?"gray":e<=.125?"green_0":e<=.375?"green_25":e<=.625?"green_50":e<=.875?"green_75":e<=1?"green_100":"gray"}}]),e}(),Z=X,Q=r("1fca"),K={extends:Q["b"],mixins:[Q["c"].reactiveData],name:"ApexGrowthPieChart",data:function(){return{chartData:{labels:["% Pleine croissance   ","% Croissance ralentie","% Croissance arrétée"],datasets:[{data:[0,0,0],label:"croissance des apex",backgroundColor:["#2C6109","#6E9624","#C5DC68"],borderColor:["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 1)","rgba(255, 255, 255, 1)"],borderWidth:1}]},chartNoData:{labels:["pas d'observations"],datasets:[{data:[-1],label:"croissance des apex",backgroundColor:["#cccccc"],borderColor:["rgba(255, 255, 255, 1)"],borderWidth:1}]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,legend:{position:"right",onClick:function(e){return e.stopPropagation()}}}}},mounted:function(){var e=this;this.$nextTick((function(){e.$store.commit("incrementForceComponentUpdateCounter")}))},computed:{selectedWeekPieData:{get:function(){var e=this.$store.state.forceComponentUpdateCounter,t=this.$store.getters.getSelectedWeekMetric,r=parseInt(t.nbObsFullGrowth),a=parseInt(t.nbObsSlowGrowth),s=parseInt(t.nbObsStoppedGrowth),n=0,i=0,o=0,c=r+a+s;c>0&&(n=Math.round(r/c*100),i=Math.round(a/c*100),o=Math.round(s/c*100));var l={nbTotalObs:c,prctGrowthList:[n,i,o],forcedChartUpdateCounter:e};return l}}},watch:{selectedWeekPieData:function(e){e.nbTotalObs>0?(this.chartData.datasets[0].data=e.prctGrowthList,this.renderChart(this.chartData,this.options)):(this.chartNoData.datasets[0].data=[-1],this.renderChart(this.chartNoData,this.options))}}},ee={extends:Q["a"],mixins:[Q["c"].reactiveData],name:"ApexGrowthLineChart",data:function(){return{chartData:{labels:[],datasets:[{label:"Indice croiss.",yAxisID:"A",fill:!1,lineTension:.1,backgroundColor:"rgba(242, 142, 146, 0.2)",borderColor:"rgb(242, 142, 146)",borderCapStyle:"square",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(242, 142, 146)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% pleine",yAxisID:"B",fill:!0,hidden:!0,lineTension:.1,backgroundColor:"rgba(247, 201, 161, 0.2)",borderColor:"rgb(247, 201, 161)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(247, 201, 161)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% ralentie",yAxisID:"B",fill:!0,hidden:!1,lineTension:.1,backgroundColor:"rgba(144, 190, 184, 0.2)",borderColor:"rgb(144, 190, 184)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(144, 190, 184)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]},{label:"% arrétée",yAxisID:"B",fill:!0,hidden:!0,lineTension:.1,backgroundColor:"rgba(105, 134, 143, 0.2)",borderColor:"rgb(105, 134, 143)",borderCapStyle:"square",borderDash:[5,5],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(105, 134, 143)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom"},scales:{xAxes:[{ticks:{autoSkip:!1,fullWidth:!0,suggestedMax:14}}],yAxes:[{id:"A",type:"linear",position:"left",scaleLabel:{display:!0,labelString:"Indice croiss.",fontSize:11},ticks:{max:1,min:0,stepSize:.25}},{id:"B",type:"linear",position:"right",scaleLabel:{display:!0,labelString:"% Apex",fontSize:11},ticks:{max:100,min:0,stepSize:25}}]}}}},mounted:function(){var e=this;this.$nextTick((function(){e.$store.commit("incrementForceComponentUpdateCounter")}))},computed:{selectedParcelYearWeeksGrowthData:{get:function(){for(var e=this.$store.state.selectedParcelIdx,t=this.$store.state.selectedYearIdx,r=this.$store.state.forceComponentUpdateCounter,a=[],s=[],n=[],i=[],o=this.$store.getters.weekLabelList,c=o.length,l=0;l<c;l++){var d=this.$store.getters.getWeekMetric(e,t,l),u=parseInt(d.nbObsFullGrowth),p=parseInt(d.nbObsSlowGrowth),m=parseInt(d.nbObsStoppedGrowth),h=null,b=null,f=null,v=null,g=u+p+m;g>0&&(h=Math.round(u/g*100),b=Math.round(p/g*100),f=Math.round(m/g*100),v=(.5*b+h)/100),a.push(h),s.push(b),n.push(f),i.push(v)}var w={weekLabelList:o,prctFullGrowth:a,prctSlowGrowth:s,prctStoppedGrowth:n,icApex:i,forcedChartUpdateCounter:r};return w}}},watch:{selectedParcelYearWeeksGrowthData:function(e){this.chartData.labels=e.weekLabelList,this.chartData.datasets[0].data=e.icApex,this.chartData.datasets[1].data=e.prctFullGrowth,this.chartData.datasets[2].data=e.prctSlowGrowth,this.chartData.datasets[3].data=e.prctStoppedGrowth,this.renderChart(this.chartData,this.options)}}},te={extends:Q["a"],mixins:[Q["c"].reactiveData],name:"ApexHydricConstraintLineChart",data:function(){return{chartData:{labels:[],datasets:[{label:"Niveau contrainte hydrique",yAxisID:"CH",fill:!0,steppedLine:"middle",lineTension:.1,backgroundColor:"rgba(151, 162, 191, 0.2)",borderColor:"rgb(151, 162, 191)",borderCapStyle:"square",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"black",pointBackgroundColor:"white",pointBorderWidth:1,pointHoverRadius:8,pointHoverBackgroundColor:"rgb(151, 162, 191)",pointHoverBorderColor:"white",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom"},scales:{xAxes:[{ticks:{suggestedMax:14}}],yAxes:[{id:"CH",type:"linear",position:"left",ticks:{max:3,min:0,stepSize:1,callback:function(e){switch(e){case 0:return"Absente";case 1:return"Modérée";case 2:return"Forte";case 3:return"Sévère"}}}}]}}}},mounted:function(){var e=this;this.$nextTick((function(){e.$store.commit("incrementForceComponentUpdateCounter")}))},computed:{selectedParcelYearWeeksHydricConstraint:{get:function(){for(var e=this.$store.state.forceComponentUpdateCounter,t=[],r=this.$store.state.selectedParcelIdx,a=this.$store.state.selectedYearIdx,s=this.$store.getters.weekLabelList,n=s.length,i=0;i<n;i++){var o=this.$store.getters.getWeekMetric(r,a,i),c=parseInt(o.nbObsFullGrowth),l=parseInt(o.nbObsSlowGrowth),d=parseInt(o.nbObsStoppedGrowth),u=0,p=0,m=0,h=c+l+d;h>0&&(u=Math.round(c/h*100),p=Math.round(l/h*100),m=(.5*p+u)/100);var b=3;m>=.75?b=0:p>=5?b=1:p<=90&&(b=2),h<=0&&(b=0,b=null),t.push(b)}var f={weekLabelList:s,hydricContraintList:t,forcedChartUpdateCounter:e};return f}}},watch:{selectedParcelYearWeeksHydricConstraint:function(e){this.chartData.labels=e.weekLabelList,this.chartData.datasets[0].data=e.hydricContraintList,this.renderChart(this.chartData,this.options)}}};r("f9e3"),r("2dd8");delete F["Icon"].Default.prototype._getIconUrl,F["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")});var re={name:"ApexMap",components:{LMap:q["a"],LTileLayer:H["a"],LMarker:V["a"],LPopup:J["a"],ApexGrowthPieChart:K,ApexGrowthLineChart:ee,ApexHydricConstraintLineChart:te},data:function(){return{selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",currentZoom:18,currentCenter:Object(F["latLng"])(43.6452,3.87189),mapOptions:{zoomSnap:.5},prevYearIsShowned:!1,msgPrevYear:null}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.state.loggedUserEmail||e.$router.push("/"),e.selectedParcelIdx=e.$store.state.selectedParcelIdx,e.selectedYearIdx=e.$store.state.selectedYearIdx,e.selectedWeekIdx=e.$store.state.selectedWeekIdx;case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$store.state.loggedUserEmail||this.$router.push("/"),this.selectedParcelIdx=this.$store.state.selectedParcelIdx,this.selectedYearIdx=this.$store.state.selectedYearIdx,this.selectedWeekIdx=this.$store.state.selectedWeekIdx,this.parcelMarkerClick(this.selectedParcelIdx),this.$store.commit("incrementForceComponentUpdateCounter")},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e),this.parcelMarkerClick(e)},selectedYearIdx:function(e){this.$store.commit("updateSelectedYearIdx",e)},selectedWeekIdx:function(e){this.$store.commit("updateSelectedWeekIdx",e)},currentCenter:function(e){this.$refs.parcelInfoMap.setCenter(e)}},methods:{showCoord:function(e){console.log("click on coord"),console.log(e.latlng)},zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},innerClick:function(){alert("Click!")},getLatLng:function(e){return Object(F["latLng"])(e.lat,e.lng)},parcelMarkerClick:function(e){console.log("parcelMarkerClick pIdx: "+e),e!==this.selectedParcelIdx&&(this.selectedParcelIdx=parseInt(e));var t=this.$store.state.userDataObj.parcels[e].parcelCoord.lat,r=this.$store.state.userDataObj.parcels[e].parcelCoord.lng;this.currentCenter=Object(F["latLng"])(t,r)},showPrevYear:function(e){e?0===this.selectedYearIdx?this.msgPrevYear="pas d'observations avant "+this.$store.getters.yearNumberList[this.selectedYearIdx]:(this.selectedYearIdx=this.selectedYearIdx-1,this.prevYearIsShowned=e):(this.prevYearIsShowned&&(this.selectedYearIdx=this.selectedYearIdx+1,this.prevYearIsShowned=e),this.msgPrevYear=null)},createIcon:function(e){var t=-1,r=this.$store.getters.getTotalNbObs(e,this.selectedYearIdx,this.selectedWeekIdx);r>0&&(t=this.$store.getters.getAvgGrowth(e,this.selectedYearIdx,this.selectedWeekIdx),t=Math.round(100*t)/100);var a=Z.avgGrowthToGreenColor(t);return!0===this.prevYearIsShowned&&(console.log(" color pin border : "),a+="_bordered"),new F["Icon"]({iconUrl:"images/my_"+a+"_pin.png",iconSize:[22,35],iconAnchor:[11,34],popupAnchor:[0,-34]})}}},ae=re,se=(r("cdc8"),Object(y["a"])(ae,B,z,!1,null,"b38f70de",null)),ne=se.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{staticClass:"global"},[r("div",{staticClass:"meta"},[r("div",{staticClass:"title"},[r("hr"),r("h4",[e._v("Bonjour "+e._s(e.$store.getters.getDisplayedUserName))]),r("hr")]),r("div",{staticClass:"menu"},[r("div",{attrs:{id:"compagne"}},[r("b",[e._v("Campagne :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYearIdx,expression:"selectedYearIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYearIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.yearNumberList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"semaine"}},[r("b",[e._v("Semaine :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWeekIdx,expression:"selectedWeekIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedWeekIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.weekLabelList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"parcelle"}},[r("b",[e._v("Parcelle :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedParcelIdx,expression:"selectedParcelIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedParcelIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.parcelNameList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ("+e._s(e.$store.getters.getDisplayedUserNameIfNeeded(e.$store.state.userDataObj.parcels[a].dataOwnerEMail,e.$store.state.userDataObj.parcels[a].dataOwnerName))+") ")])})),0)])]),r("div",{staticClass:"table"},[r("hr"),r("table",{staticClass:"table-striped"},[e._m(0),r("tbody",[r("td",[r("b-form-input",{staticStyle:{width:"auto","text-align":"center","margin-left":"auto","margin-right":"auto"},attrs:{type:"number"},model:{value:e.selectedWeekMetric.nbObsFullGrowth,callback:function(t){e.$set(e.selectedWeekMetric,"nbObsFullGrowth",t)},expression:"selectedWeekMetric.nbObsFullGrowth"}})],1),r("td",[r("b-form-input",{staticStyle:{width:"auto","text-align":"center","margin-left":"auto","margin-right":"auto"},attrs:{type:"number"},model:{value:e.selectedWeekMetric.nbObsSlowGrowth,callback:function(t){e.$set(e.selectedWeekMetric,"nbObsSlowGrowth",t)},expression:"selectedWeekMetric.nbObsSlowGrowth"}})],1),r("td",[r("b-form-input",{staticStyle:{width:"auto","text-align":"center","margin-left":"auto","margin-right":"auto"},attrs:{type:"number"},model:{value:e.selectedWeekMetric.nbObsStoppedGrowth,callback:function(t){e.$set(e.selectedWeekMetric,"nbObsStoppedGrowth",t)},expression:"selectedWeekMetric.nbObsStoppedGrowth"}})],1),r("td",[r("button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"margin-right":"20px"},attrs:{id:"btnsendmodif"},on:{click:function(t){return e.updateSelectedWeekMetric()}}},[e._v(" Modifier ")]),r("button",{staticClass:"btn btn-warning btn-sm",attrs:{id:"btnsenddelete"},on:{click:function(t){return e.reInitSelectedWeekMetric()}}},[e._v(" Réinitialiser ")])])])]),r("hr")]),r("div",[e._v(" "+e._s(e.msg)+" "),e._l(e.errors,(function(t,a){return r("div",{key:a,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)]),r("div",{staticClass:"btn"},[r("hr"),r("router-link",{staticClass:"btn btn-success btn-sm",staticStyle:{"margin-bottom":"20px"},attrs:{to:"/map",tag:"button"}},[e._v("Retour à la carte")]),r("hr")],1),r("div",{staticClass:"graphe"},[r("div",{attrs:{id:"titlegraphe"}},[r("p",{staticStyle:{"font-size":"20px"}},[e._v(" Parcelle: "+e._s(this.$store.getters.parcelNameList[this.$store.state.selectedParcelIdx])+" ")])]),r("hr"),r("div",{attrs:{id:"graphe1"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Croissance des apex semaine du "+e._s(this.$store.getters.weekLabelList[this.$store.state.selectedWeekIdx])+" "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" ")]),r("apex-growth-pie-chart",{staticClass:"item"})],1),r("hr"),r("div",{attrs:{id:"graphe2"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la croissance des apex "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-growth-line-chart",{staticClass:"item"})],1)]),r("hr"),r("div",{attrs:{id:"graphe3"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la contrainte hydrique "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-hydric-constraint-line-chart",{staticClass:"item"})],1)])])]):e._e()},oe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("# Pleine croissance")]),r("th",[e._v("# Croissance ralentie")]),r("th",[e._v("# Croissance arrêtée")]),r("th",{attrs:{colspan:"2"}},[e._v("Operations")])])])}],ce={components:{ApexGrowthPieChart:K,ApexGrowthLineChart:ee,ApexHydricConstraintLineChart:te},data:function(){return{selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,selectedWeekMetric:{},msg:"",errors:[]}},created:function(){this.$store.state.loggedUserEmail||this.$router.push("/"),this.selectedParcelIdx=this.$store.state.selectedParcelIdx,this.selectedYearIdx=this.$store.state.selectedYearIdx,this.selectedWeekIdx=this.$store.state.selectedWeekIdx,this.selectedWeekMetric=this.$store.getters.getSelectedWeekMetric},mounted:function(){this.$store.state.loggedUserEmail||this.$router.push("/"),this.selectedParcelIdx=this.$store.state.selectedParcelIdx,this.selectedYearIdx=this.$store.state.selectedYearIdx,this.selectedWeekIdx=this.$store.state.selectedWeekIdx,this.msg="",this.errors=[],this.selectedWeekMetric=this.$store.getters.getSelectedWeekMetric,this.$store.commit("incrementForceComponentUpdateCounter")},methods:{formIsValid:function(){var e=!0;return isNaN(parseInt(this.selectedWeekMetric.nbObsFullGrowth))?(this.errors.push("# Pleine croissance : '"+this.selectedWeekMetric.nbObsFullGrowth+"' n'est pas un entier "),e=!1):parseInt(this.selectedWeekMetric.nbObsFullGrowth)>=0?this.selectedWeekMetric.nbObsFullGrowth=parseInt(this.selectedWeekMetric.nbObsFullGrowth):(this.errors.push("# Pleine croissance : '"+this.selectedWeekMetric.nbObsFullGrowth+"' n'est pas un entier positif "),e=!1),isNaN(parseInt(this.selectedWeekMetric.nbObsSlowGrowth))?(this.errors.push("# Croissance ralentie : '"+this.selectedWeekMetric.nbObsSlowGrowth+"' n'est pas un entier"),e=!1):parseInt(this.selectedWeekMetric.nbObsSlowGrowth)>=0?this.selectedWeekMetric.nbObsSlowGrowth=parseInt(this.selectedWeekMetric.nbObsSlowGrowth):(this.errors.push("# Croissance ralentie  : '"+this.selectedWeekMetric.nbObsSlowGrowth+"' n'est pas un entier positif "),e=!1),isNaN(parseInt(this.selectedWeekMetric.nbObsStoppedGrowth))?(this.errors.push("# Croissance arretée : '"+this.selectedWeekMetric.nbObsStoppedGrowth+"' n' est pas un entier "),e=!1):parseInt(this.selectedWeekMetric.nbObsStoppedGrowth)>=0?this.selectedWeekMetric.nbObsStoppedGrowth=parseInt(this.selectedWeekMetric.nbObsStoppedGrowth):(this.errors.push("# Croissance arretée : '"+this.selectedWeekMetric.nbObsStoppedGrowth+"' n'est pas un entier positif "),e=!1),this.msg="Les données de la semaine n'ont pas été modifiées",e},updateSelectedWeekMetric:function(){var e=this;this.msg="",this.errors=[],console.log("START updateSelectedWeekMetric"),this.formIsValid()&&this.$store.dispatch("saveSelectedWeekMetric",this.selectedWeekMetric).then((function(){e.selectedWeekMetric=e.$store.getters.getSelectedWeekMetric,e.$store.commit("incrementForceComponentUpdateCounter"),e.errors=[],e.msg="Les données de la semaine ont bien été modifiées, ",e.$store.state.demoUserEmail&&(e.msg+=" pour le "+e.$store.getters.getDisplayedUserName+" ces modifications sont effectives que le temps de la session")})),console.log("END updateSelectedWeekMetric")},reInitSelectedWeekMetric:function(){var e=this;this.msg="",this.errors=[];var t=this.$store.getters.getSelectedWeekMetric,r="pIdx:".concat(this.selectedParcelIdx," yIdx:").concat(this.selectedYearIdx," wIdx:").concat(this.selectedWeekIdx);this.$store.state.userModifiedWeekMetrics.has(r)&&this.$store.dispatch("deleteSelectedWeekMetric",t).then((function(){e.selectedWeekMetric=e.$store.getters.getSelectedWeekMetric,e.$store.commit("incrementForceComponentUpdateCounter"),e.errors=[],e.msg="Les données de la semaine ont été réinitialisées aux valeurs collectées dans ApeX Vignes",e.$store.state.demoUserEmail&&(e.msg+=" pour l'"+e.$store.getters.getDisplayedUserName+" ces modifications sont effectives que le temps de la session")}))}},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e),this.selectedWeekMetric=this.$store.getters.getSelectedWeekMetric,this.msg="",this.errors=[]},selectedYearIdx:function(e){this.$store.commit("updateSelectedYearIdx",e),this.selectedWeekMetric=this.$store.getters.getSelectedWeekMetric,this.msg="",this.errors=[]},selectedWeekIdx:function(e){this.$store.commit("updateSelectedWeekIdx",e),this.selectedWeekMetric=this.$store.getters.getSelectedWeekMetric,this.msg="",this.errors=[]}}},le=ce,de=(r("aaaa"),Object(y["a"])(le,ie,oe,!1,null,"6a6a65de",null)),ue=de.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"global"},[r("div",{staticClass:"title"},[r("hr"),r("h4",[e._v("Bonjour "+e._s(e.$store.getters.getDisplayedUserName))]),r("hr")]),r("div",{staticClass:"menu"},[r("h5",{attrs:{id:"menutitle"}},[r("b",[e._v("Nouveau partage des observations collectées par "+e._s(e.$store.getters.getDisplayedUserName)+" ")])]),r("div",{attrs:{id:"menuselect"}},[e._m(0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.parcelp,expression:"parcelp"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.parcelp=t.target.multiple?r:r[0]}}},e._l(e.parcelNameListObservedByLoggedUser,(function(t,a){return r("option",{key:a,attrs:{item:t}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"menuinput"}},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.mailp,expression:"mailp"}],attrs:{id:"input",type:"text",name:"mailp"},domProps:{value:e.mailp},on:{input:function(t){t.target.composing||(e.mailp=t.target.value)}}})]),r("div",{attrs:{id:"btn"}},[r("button",{staticClass:"btn btn-info btn-sm",attrs:{id:"buttonverif"},on:{click:function(t){return e.checkEMailAndParcel()}}},[e._v(" Vérifier ")]),r("button",{staticClass:"btn btn-success btn-sm",staticStyle:{weight:"auto"},attrs:{id:"buttoninsert"},on:{click:function(t){return e.insertParcelDataSharedToSomn()}}},[e._v(" Ajouter ")])])]),r("p",[e._v(e._s(e.message))]),r("hr"),r("div",{staticClass:"body"},[r("div",{staticClass:"obspartager"},[r("h5",[r("b",[e._v(" Liste des observations partagées par "+e._s(e.$store.getters.getDisplayedUserName)+" ")])]),r("table",{staticClass:"table-striped"},[e._m(2),r("tbody",e._l(e.parcelRowsSharedToSomeone,(function(t,a){return r("tr",{key:a,attrs:{index:a}},[r("td",[e._v(e._s(e.$store.getters.getDisplayedUserEMail))]),r("td",[e._v(e._s(t.dataUserEMail))]),r("td",[e._v(e._s(t.parcelName))]),r("td",[r("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(r){return e.deleteParcelDataSharedToSomn(t.dataOwnerEMail,t.dataUserEMail,t.parcelName)}}},[e._v(" Supprimer ")])])])})),0)])]),r("hr"),r("div",{staticClass:"obsrecu"},[e._m(3),r("table",{staticClass:"table-striped"},[e._m(4),r("tbody",e._l(e.parcelRowsSharedBySomeone,(function(t,a){return r("tr",{key:a,attrs:{index:a}},[r("td",[e._v(e._s(t.dataOwnerEMail))]),r("td",[e._v(e._s(e.$store.getters.getDisplayedUserEMail))]),r("td",[e._v(e._s(t.parcelName))])])})),0)])])]),r("hr")])},me=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[r("b",[e._v("Parcelle")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticStyle:{"margin-left":"10px"},attrs:{id:"labelinput",for:"mail"}},[r("b",[e._v("Mail Destinataire ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Observateur")]),r("th",[e._v("Destinataire")]),r("th",[e._v("Parcelle")]),r("th",[e._v("Operation")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h5",[r("b",[e._v("Liste des observations partagées par un autre utilisateur")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Observateur")]),r("th",[e._v("Destinataire")]),r("th",[e._v("Parcelle")])])])}],he={name:"App",components:{},data:function(){return{dataOwnerEMail:"",dataUserEMail:"",parcelName:"",date:"",userDataObj:[],userDBRows:[],error:"",text:"",pIdx:0,yIdx:"",wIdx:"",message:"",parcelp:"",mailp:"",parcelRowsSharedToSomeone:[],parcelRowsSharedBySomeone:[]}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.state.loggedUserEmail||e.$router.push("/"),t.prev=1,t.next=4,m.sendToParcelDataSharing({transaction:"select_parceldatasharing",ownerEMail:e.$store.state.loggedUserEmail});case 4:return e.parcelRowsSharedToSomeone=t.sent,console.log("parcelRowsSharedToSomeone"),console.log(e.parcelRowsSharedToSomeone),t.next=9,m.sendToParcelDataSharing({transaction:"select_parceldatasharing",userEMail:e.$store.state.loggedUserEmail});case 9:e.parcelRowsSharedBySomeone=t.sent,console.log("parcelRowsSharedBySomeone"),console.log(e.parcelRowsSharedBySomeone),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),console.log(t.t0.message),e.error=t.t0.message;case 18:case"end":return t.stop()}}),t,null,[[1,14]])})))()},computed:{parcelNameListObservedByLoggedUser:function(){var e=this;return null!==this.$store.state.userDataObj&&null!==this.$store.state.userDataObj.parcels?this.$store.state.userDataObj.parcels.map((function(t){if(t.dataOwnerEMail===e.$store.state.userDataObj.userEMail)return t.parcelName})):[]}},methods:{checkEMailAndParcel:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="",t.abrupt("return",new Promise((function(t,r){if(e.$store.state.demoUserEmail)e.message=e.$store.getters.getDisplayedUserEMail+" n'est pas authorisé à ajouter de nouveaux partages",t(!1);else{var a,n=!1,i=Object(s["a"])(e.parcelRowsSharedToSomeone);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.dataOwnerEMail===e.$store.state.loggedUserEmail&&o.dataUserEMail===e.mailp&&o.parcelName===e.parcelp&&(e.message="Les informations de la parcelle sont déjà partagées avec l'utilisateur",n=!0)}}catch(c){i.e(c)}finally{i.f()}if(n)t(!1);else try{m.checkEMail(e.mailp).then((function(r){!0===r?e.parcelp?(e.message="La parcelle et le mail sont valides",e.parcelName=e.parcelp,t(!0)):(e.message="Choisir la parcelle",t(!1)):(e.message="Mail non valide",e.parcelName="",t(!0))}))}catch(c){r(c)}}})));case 2:case"end":return t.stop()}}),t)})))()},insertParcelDataSharedToSomn:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.demoUserEmail){t.next=3;break}return e.message=e.$store.getters.getDisplayedUserName+" n'est pas authorisé à ajouter de nouveaux partages, connectez-vous en tant qu'utilisateur",t.abrupt("return");case 3:return console.log("START insertParcelDataSharedToSomn"),t.next=6,e.checkEMailAndParcel(e.mailp);case 6:if(r=t.sent,console.log("mailAndParcelAreValid "+r),!r){t.next=18;break}return t.next=11,m.sendToParcelDataSharing({transaction:"insert_parceldatasharing",dataUserEMail:e.mailp,dataOwnerEMail:e.$store.state.userDataObj.userEMail,parcelName:e.parcelp});case 11:return a=t.sent,console.log("res insert_parceldatasharing "),console.log(a),t.next=16,m.sendToParcelDataSharing({transaction:"select_parceldatasharing",ownerEMail:e.$store.state.userDataObj.userEMail});case 16:e.parcelRowsSharedToSomeone=t.sent,e.message="La parcelle et le mail destinataire ont été ajouté";case 18:console.log("END insertParcelDataSharedToSomn");case 19:case"end":return t.stop()}}),t)})))()},deleteParcelDataSharedToSomn:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.$store.state.demoUserEmail){s.next=3;break}return a.message=a.$store.getters.getDisplayedUserName+" n'est pas authorisé à supprimer les informations de partage",s.abrupt("return");case 3:return s.next=5,m.sendToParcelDataSharing({transaction:"delete_parceldatasharing",dataUserEMail:t,dataOwnerEMail:e,parcelName:r});case 5:return s.next=7,m.sendToParcelDataSharing({transaction:"select_parceldatasharing",ownerEMail:a.$store.state.userDataObj.userEMail});case 7:a.parcelRowsSharedToSomeone=s.sent;case 8:case"end":return s.stop()}}),s)})))()}},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e)}}},be=he,fe=(r("8653"),Object(y["a"])(be,pe,me,!1,null,"1045ef0c",null)),ve=fe.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{staticClass:"global"},[r("br"),r("div",{staticClass:"title"},[r("hr"),r("h4",[e._v("Bonjour "+e._s(e.$store.getters.getDisplayedUserName))]),r("hr")]),r("div",{staticClass:"menu"},[r("div",{attrs:{id:"compagne"}},[r("b",[e._v("Campagne :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYearIdx,expression:"selectedYearIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYearIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.yearNumberList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"semaine"}},[r("b",[e._v("Semaine :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWeekIdx,expression:"selectedWeekIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedWeekIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.weekLabelList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ")])})),0)]),r("div",{attrs:{id:"parcelle"}},[r("b",[e._v("Parcelle :")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedParcelIdx,expression:"selectedParcelIdx"}],staticClass:"custom-select",staticStyle:{width:"auto"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedParcelIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.parcelNameList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(t)+" ("+e._s(e.$store.getters.getDisplayedUserNameIfNeeded(e.$store.state.userDataObj.parcels[a].dataOwnerEMail,e.$store.state.userDataObj.parcels[a].dataOwnerName))+") ")])})),0)])]),r("div",{staticClass:"graphe"},[r("div",{attrs:{id:"grT"}},[r("p",{staticStyle:{"font-size":"20px"}},[e._v(" Parcelle: "+e._s(this.$store.getters.parcelNameList[this.$store.state.selectedParcelIdx])+" ")])]),r("div",{attrs:{id:"graphe1"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Croissance des apex semaine du "+e._s(this.$store.getters.weekLabelList[this.$store.state.selectedWeekIdx])+" "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" ")]),r("apex-growth-pie-chart",{staticClass:"item"})],1),r("div",{attrs:{id:"graphe2"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la croissance des apex "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-growth-line-chart",{staticClass:"item"})],1)]),r("div",{attrs:{id:"graphe3"}},[r("p",{staticStyle:{"font-size":"15px"}},[e._v(" Evolution de la contrainte hydrique "+e._s(this.$store.getters.yearNumberList[this.$store.state.selectedYearIdx])+" "),r("apex-hydric-constraint-line-chart",{staticClass:"item",attrs:{id:"graphe33"}})],1)])]),r("hr"),r("div",{staticClass:"export",staticStyle:{"margin-top":"10px"}},[r("hr"),r("button",{staticClass:"btn btn-danger btn-sm",attrs:{id:"expdf"},on:{click:function(t){return e.exportPDF()}}},[e._v(" Export en PDF ")]),r("button",{staticClass:"btn btn-success btn-sm",attrs:{id:"excsv"},on:{click:function(t){return e.exportCSV()}}},[e._v(" Export en CSV ")]),r("hr")])]):e._e()},we=[],ke=r("e511"),xe=(r("0da4"),{name:"Export",components:{ApexGrowthPieChart:K,ApexGrowthLineChart:ee,ApexHydricConstraintLineChart:te},data:function(){return{userDataObj:[],userDBRows:[],error:"",selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,parceld:"",hydricConstraint:3,prctSlowGrowth:0,prctFullGrowth:0,avgGrowth:0}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.state.loggedUserEmail||e.$router.push("/"),e.selectedParcelIdx=e.$store.state.selectedParcelIdx,e.selectedYearIdx=e.$store.state.selectedYearIdx,e.selectedWeekIdx=e.$store.state.selectedWeekIdx;case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.$store.state.loggedUserEmail||this.$router.push("/"),this.$nextTick((function(){e.selectedParcelIdx=e.$store.state.selectedParcelIdx,e.selectedYearIdx=e.$store.state.selectedYearIdx,e.selectedWeekIdx=e.$store.state.selectedWeekIdx,e.$store.commit("incrementForceComponentUpdateCounter")}))},methods:{getDataFrame:function(){for(var e=["Parcelle","Campagne","Semaine","Nb Obs.","Nb Pleine croiss.","Nb Croiss. ralentie","Nb Croiss. arrêtée","% Pleine croiss.","% Croiss. ralentie","% Croiss. arrêtée","ic-Apex","Contrainte hydrique"],t=[],r=this.$store.getters.weekLabelList,a=r.length,s=0;s<a;s++){var n=this.$store.getters.getWeekMetric(this.selectedParcelIdx,this.selectedYearIdx,s),i=parseInt(n.nbObsFullGrowth),o=parseInt(n.nbObsSlowGrowth),c=parseInt(n.nbObsStoppedGrowth),l=i+o+c,d=0,u=0,p=0,m=0;l>0&&(d=Math.round(i/l*100),u=Math.round(o/l*100),p=Math.round(c/l*100),m=(.5*u+d)/100);var h=3;m>=.75?h=0:u>=5?h=1:u<=90&&(h=2),l<=0&&(h=0);var b=[];b.push(this.$store.getters.parcelNameList[this.selectedParcelIdx]),b.push(this.$store.getters.yearNumberList[this.selectedYearIdx]),b.push(this.$store.getters.weekLabelList[s]),b.push(l),b.push(i),b.push(o),b.push(c),b.push(d),b.push(u),b.push(p),b.push(m),b.push(h),t.push(b)}var f={columns:e,rows:t};return console.log("DataFrame"),console.log(f),f},exportPDF:function(){var e=new ke("landscape"),t=document.getElementById("pie-chart"),r=document.getElementById("line-chart"),a=document.getElementById("graphe33").children[1],s=t.toDataURL(),n=r.toDataURL(),i=a.toDataURL();e.text(90,20," Parcelle "+this.$store.getters.parcelNameList[this.selectedParcelIdx]+" Observateur "+this.$store.getters.getDisplayedUserNameIfNeeded(this.$store.state.userDataObj.parcels[this.selectedParcelIdx].dataOwnerEMail,this.$store.state.userDataObj.parcels[this.selectedParcelIdx].dataOwnerName)),e.text(60,40," Indicateurs d'évolution de croissance des Apex pour la campagne "+this.$store.getters.yearNumberList[this.selectedYearIdx]),e.addImage(s,"NPG",10,60,60,60),e.addImage(n,"NPG",90,60,90,60),e.addImage(i,"NPG",210,60,60,60),e.text(10,130,"semaine du "+this.$store.getters.weekLabelList[this.selectedWeekIdx]),e.text(90,130,"évolution de la croissance "),e.text(200,130,"évolution de la contrainte hydrique"),e.addPage("a4","l"),e.text(60,10,"Table des indicateurs de croissance calculés pour la campagne "+this.$store.getters.yearNumberList[this.selectedYearIdx]);var o=this.getDataFrame();e.autoTable(o.columns,o.rows,{margin:{top:20,halign:"center"},rowStyles:{0:{halign:"center"}}}),e.save("table.pdf")},exportCSV:function(){var e=this.getDataFrame(),t="data:text/csv;charset=utf-8,\n";e.columns.forEach((function(e,r,a){return t=t+'"'+e+'"'+(r<a.length-1?",":"\n")})),e.rows.forEach((function(e){return e.forEach((function(e,r,a){return t=t+e+(r<a.length-1?",":"\n")}))})),console.log("csvContent"),console.log(t);var r=encodeURI(t),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","export.csv"),a.click()}},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e),this.parcelMarkerClick(e)},selectedYearIdx:function(e){this.$store.commit("updateSelectedYearIdx",e)},selectedWeekIdx:function(e){this.$store.commit("updateSelectedWeekIdx",e)}}}),_e=xe,ye=(r("f840"),Object(y["a"])(_e,ge,we,!1,null,"234a216a",null)),Me=ye.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"global"},[r("br"),r("div",{staticClass:"menu"},[r("hr"),r("h4",{staticClass:"title",staticStyle:{"background-color":"grey"}},[e._v(" Bonjour "+e._s(e.$store.getters.getDisplayedUserName)+" ")]),r("hr"),r("p",[r("b",[e._v("Email:")]),e._v(" "+e._s(e.$store.getters.getDisplayedUserEMail))]),e.$store.state.demoUserEmail?r("div",[e._v(" "+e._s(e.$store.getters.getDisplayedUserName)+" ne peut pas changer ses données d'authentification ")]):r("div",[r("router-link",{staticClass:"btn btn-success btn-sm",staticStyle:{"margin-bottom":"20px"},attrs:{to:"/addpsw",tag:"button"}},[e._v("Ajouter/Modifier un mot de passe ")])],1)])])},Oe=[],Ce={name:"App",components:{},props:{userId:String},computed:{},data:function(){return{}},created:function(){this.$store.state.loggedUserEmail||this.$router.push("/")},mounted:function(){this.$store.state.loggedUserEmail||this.$router.push("/")},methods:{}},je=Ce,Se=(r("90e1"),Object(y["a"])(je,Ie,Oe,!1,null,"a12d8646",null)),$e=Se.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"global"},[r("hr"),r("h4",{staticClass:"title",staticStyle:{"background-color":"grey"}},[e._v(" Bonjour "+e._s(e.$store.getters.getDisplayedUserName)+" ")]),r("hr"),e.$store.state.demoUserEmail?r("div",[r("h5",[e._v("Bienvenue sur l'application Apex Territoire")]),e._m(0),r("h5",[e._v("Objectifs")]),e._m(1),r("router-link",{staticClass:"nav-link",attrs:{to:"/map"}},[e._v("Carte")]),e._m(2),r("router-link",{staticClass:"nav-link",attrs:{to:"/edit"}},[e._v("Editer")]),e._m(3),r("router-link",{staticClass:"nav-link",attrs:{to:"/partage"}},[e._v("Partager")]),e._m(4),r("router-link",{staticClass:"nav-link",attrs:{to:"/partage"}},[e._v("Exporter")]),e._m(5),r("router-link",{staticClass:"nav-link",attrs:{to:"/profil"}},[e._v("Authentification")]),e._m(6),r("h5",[e._v("Contributeurs")]),e._m(7)],1):e._e()])},Ne=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" Dans la suite nous détaillons les objectifs et le guide d'utilisation d'Apex Territoire. Vous pouvez directement commencer et cliquer sur l'onglet "),r("a",{attrs:{href:"#/map"}},[e._v("Carte")]),e._v(" puis revenir sur le guide d'utilisation pour avoir plus d'informations sur les fonctionalités implémentées. Apex Territoire est aussi accessible sur mobile et tablette. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" Apex territoire fait suite, et complémentaire à l'application Apex Vignes. L'objectif premier d'Apex Territoire est de proposer aux utilisateurs une "),r("b",[e._v(" visualisation et une analyse spatio-temporelle de la croissance des apex telle qu'elle a été observée dans les parcelles de vignes.")]),e._v(" Autour de cet objectif, nous avons implémentés de nouvelles fonctionnalités permettant aux utilisateurs d'"),r("b",[e._v("ajouter")]),e._v(", de "),r("b",[e._v("mettre à jour")]),e._v(" de "),r("b",[e._v("partager")]),e._v(" et d' "),r("b",[e._v("exporter")]),e._v(" les résumés de leurs observations. Ainsi, en plus de proposer une visualisation géolocalisées des indicateurs de croissance des apex, Apex Territoire est aussi une plate forme qui permet la mise à jour et le partage de résumés d'observations. Ces dernières fonctionnalités permettent de comparer et de mieux comprendre la croissance des apex des vignes à travers différentes campagnes et différentes parcelles. Pour satifaire ces objectifs les fonctionalités suivantes ont été implémentées : ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" La carte permet de localiser par des icones à la fois : a) les parcelles observées par l'utilisateur et b) les parcelles pour lesquelles l'utilisateur est destinataire d'un partage d'observations."),r("br"),r("b",[e._v(" * Sélectionner une campagne, une semaine et une parcelle d'intéret ")]),e._v(" à l'aide des menus de controles situé en haut de pages pour recentrer la carte sur . "),r("br"),r("b",[e._v(" * Accéder aux informations résumés sur la croissance des Apex ")]),e._v(" en cliquant sur l'icone représentant la parcelle. Chaque icone localisée sur la carte prend une couleur du vert pale au vert foncé en fonction de son indice de croissance, ou grise si il n y a pas d observations."),r("br"),r("b",[e._v(" * Comparer la croissance des Apex de la campagne précédente")]),e._v(" en passant le curseur sur le bouton campagne précédente. "),r("br"),r("b",[e._v(" * Visualiser les indicateurs de croissance de la parcelle ")]),e._v(" pour la semaine et la campagne séletionnées, dans le panneau de droite. Ces indicateurs de croissance proviennent de l'application Apex Vignes et sont instantannément recalculés en fonction des nouvelles données mises-à-jour par l'utilisateur. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" Cette fonctionnalité permet d'ajouter ou de "),r("b",[e._v(" mettre à jour le résumé des observations sur l'état des Apex ")]),e._v(" collectées dans les parcelles. Les informations mises à jour peuvent concerner à la fois, les résumés d'observations collectées par l'utilisateur, ou encore les résumés d'observations reçus d'autres utilisateurs. Les mises à jour effectuées par un utilisateur sur les résumés d'observations collectés ou reçus restent locales à l'utilisateur. Ces mises à jour ne sont visibles que par l'utilisateur et ne suppriment, ni les observations collectées par l'utilisateur, ni les observations partagées par un autre utilisateur. En cliquant sur Réinitialiser, tout utilisateur a la posibilité d' "),r("b",[e._v(" effacer ses mises à jour afin de retrouver les résumés d'observations initialement collectées ")]),e._v(". ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" La fonctionnalité de partage permet de "),r("b",[e._v(" partager les observations collectées par un utilisateur sur une parcelle avec un autre utilisateur ")]),e._v(" . Les observations partagées ne concernent que le résumé des observations collectées sur le terrain par l'utilisateur avec l'application Apex Vignes. Le partage ne concerne pas les mises à jour de résumés qui eux restent locales à la session d'un utilisateur. Afin de controler le partage d'observations entre utilisateurs, un utilisateur ne peut partager que les résumés des observations qu'il a lui meme collecté. Un utilisateur ne peut pas re-partager les résumés d'observations qu'il a reçu d'un autre utilisateur. Un utilisateur peut décider d'"),r("b",[e._v("arrêter le partage des informations sur une parcelle avec un autre utilisateur ")]),e._v(" en cliquant sur supprimer. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" Cette fonctionalité permet d'exporter au format pdf ou csv les résumés d'observations collectés et reçus par l'utilisateur. "),r("b",[e._v("Les résumés d'observations se composent les indicateurs de croissances des apex et de contraintes hydriques d'une campagne sélectionnée ")]),e._v(". L'export de données présente en plus dans un tableau récapitulatif contenant la valeur de tous les indicateurs calculés pour chaque semain de la campagne. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" Cette fonctionalité accompagne le partage des résumés d'observations collectées par les utilisateurs. Elle permet aux utilisateurs qui le souhaitent de "),r("b",[e._v("protéger l'accès à leurs données ")]),e._v(" par un mot de passe. ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" L'application Apex Territoire est à l'initiative de Léo Pichon (porteur du projet). "),r("b",[e._v("Pour toute information contactez leo.pichon@supagro.fr")]),e._v(". Cette aplication a bénéficié du développement de la cellule d'appui en informatique de l'institut de convergence "),r("a",{attrs:{href:"https://www.hdigitag.fr/fr/"}},[e._v(" #Digitag")]),e._v(". L'application a été développée par Vincent Armant et Amine Ouail à la demande de Léo Pichon et Guilhem Brunel. L'application reprend les éléments graphiques et les indicateurs de croissance développés dans "),r("a",{attrs:{href:"https://play.google.com/store/apps/details?id=ag.GB.apex&hl=en"}},[e._v("ApeX Vignes")]),e._v(". ")])}],Ee={name:"Guide",created:function(){this.$store.state.loggedUserEmail||this.$router.push("/")},mounted:function(){this.$store.state.loggedUserEmail||this.$router.push("/")},methods:{}},We=Ee,Pe=(r("70e6"),Object(y["a"])(We,De,Ne,!1,null,"0337065f",null)),Ue=Pe.exports,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login",staticStyle:{"background-image":"url(images/tuscany-vigne.jpg)","background-size":"2200px 800px",padding:"30px",margin:"1px"}},[e._m(0),r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card card-container"},[r("img",{staticClass:"profile-img-card",attrs:{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png"}}),r("h2",[e._v("Login")]),r("div",{staticClass:"form-group"},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.EMail,expression:"EMail"}],staticClass:"form-control",attrs:{type:"text",name:"EMail"},domProps:{value:e.EMail},on:{input:function(t){t.target.composing||(e.EMail=t.target.value)}}}),r("p",{staticStyle:{display:"block"},attrs:{id:"p"}},[e._v(" Visiteur en mode démo : cliquer directement sur ")]),r("button",{staticClass:"btn btn-primary btn-block",staticStyle:{display:"block"},attrs:{id:"div1"},on:{click:function(t){return e.continueToNextStep()}}},[r("span",[e._v("Continuer")])]),r("p",[e._v(e._s(e.msg))])]),e.$store.state.mailpresent?r("div",{staticClass:"form-group"},[e._m(2),r("p",[e._v("Voulez vous enregistrer un mot de passe")]),r("button",{staticClass:"btn btn-primary btn-block",on:{click:e.Oui}},[r("span",[e._v("Oui")])]),r("button",{staticClass:"btn btn-primary btn-block",on:{click:e.Non}},[r("span",[e._v("Non")])])]):e._e(),e.$store.state.PasswordRequire?r("div",{staticClass:"form-group"},[e._m(3),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("button",{staticClass:"btn btn-primary btn-block",on:{click:function(t){return e.login()}}},[r("span",[e._v("Login")])]),r("p",[e._v(e._s(e.message))])]):e._e(),""!==e.$store.state.loggedUserEmail&&""===e.$store.state.activedNavbar?r("div",[r("p",[r("b",[e._v("Chargement")]),e._v(" "),r("b-spinner",{attrs:{small:"",label:"Small Spinner",type:"grow"}}),r("b-spinner",{attrs:{small:"",label:"Small Spinner",type:"grow"}}),r("b-spinner",{attrs:{small:"",label:"Small Spinner",type:"grow"}})],1)]):e._e()])])])},Le=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("ApeX Territoire")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"EMail"}},[r("b",[e._v("Mail")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"password"}},[r("b",[e._v("Mot de passe")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"password"}},[r("b",[e._v("Mot de passe")])])}],Ae={data:function(){return{EMail:"",msg:"",message:"",password:"",activedNavbar:"",mailpresent:"",PasswordRequire:""}},methods:{loadUserData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.commit("initLoggedUserEmail",e),r.next=3,m.getUserInfo(e);case 3:return a=r.sent,console.log("userInfo"),console.log(a),s=new m.MonitoredUser(a.userEMail,a.userId,a.userName),console.log("tmpUserDataObj after userInfo"),console.log(s),r.next=11,m.addParcelObservations(s);case 11:return console.log("tmpUserDataObj after addParcelObservations"),console.log(s),r.next=15,m.addSharedParcelObservations(s);case 15:return console.log("tmpUserDataObj after addSharedParcelObservations"),console.log(s),r.next=19,m.addInitializedWeekMetrics(s);case 19:return console.log("tmpUserDataObj after addInitializedWeekMetrics"),console.log(s),m.addWeeksToUserDataObj(s),m.enforceConsistencyOfUserDataObj(s),m.sortUserDataObjByYearByWeek(s),t.$store.commit("initUserDataObj",s),console.log("updated $store.state.userDataObj: "),console.log(t.$store.state.userDataObj),r.next=29,t.$store.dispatch("initUserModifiedWeekMetrics");case 29:t.$store.commit("initActivedNavbar","true");case 30:case"end":return r.stop()}}),r)})))()},continueToNextStep:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.EMail){t.next=9;break}return r="visiteur.demo@apex-territoire.fr",e.$store.commit("initDemoUserEmail",r),t.next=5,e.loadUserData(r);case 5:console.log("Routing to guide"),e.$router.push("/map"),t.next=11;break;case 9:a=e.EMail,m.checkEMail(a).then((function(t){!0===t?(e.$store.commit("initLoggedUserEmail",a),m.checkEMailAuth(a).then((function(t){!0===t?m.checkpasswordRequire(a).then((function(t){if(!0===t){document.getElementById("div1").style.display="none",document.getElementById("p").style.display="none";var r="true";e.$store.commit("initPasswordRequire",r)}else e.loadUserData(a).then((function(){console.log("Routing to ApexMap"),e.$router.push("/map")}))})):e.loadUserData(a).then((function(){document.getElementById("div1").style.display="none",document.getElementById("p").style.display="none";var t="true";e.$store.commit("initmailpresent",t),m.mailAddToAuth(a).then((function(e){!0===e&&console.log("mail ajouté à l'authentification")}))}))}))):e.msg="mail inconnu, vérifier que le mail est enregistré dans ApeX Vignes"}));case 11:case"end":return t.stop()}}),t)})))()},Non:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.EMail,a=!0,e.$store.commit("initActivedNavbar",a),e.loadUserData(r).then((function(){console.log("Routing to ApexMap"),e.$router.push("/map")}));case 4:case"end":return t.stop()}}),t)})))()},Oui:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.EMail,e.$store.commit("initLoggedUserEmail",r),e.loadUserData(r).then((function(){console.log("Routing to addpsw"),e.$router.push("/addpsw")}));case 3:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r=e.password,a=e.EMail,m.checkPassword(r,a).then((function(t){if(!0===t){var r="true";e.$store.commit("initActivedNavbar",r),e.loadUserData(a).then((function(){console.log("Routing to ApexMap"),e.$router.push("/map")}))}else console.log("mot de passe non valide"),e.message="mot de passe non valide"}))}catch(s){e.error=s.message}case 1:case"end":return t.stop()}}),t)})))()}}},Ge=Ae,Ye=(r("bb01"),Object(y["a"])(Ge,Re,Le,!1,null,"bdb9d610",null)),Te=Ye.exports,Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"global"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card card-container"},[r("form",{attrs:{name:"form"}},[r("h4",[e._v("Ajouter un mot de passe")]),e._m(0),r("p",[e._v(e._s(e.$store.state.userDataObj.userEMail))]),e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(2),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password_repeat,expression:"password_repeat"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password (repeat)"},domProps:{value:e.password_repeat},on:{input:function(t){t.target.composing||(e.password_repeat=t.target.value)}}}),r("button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"margin-top":"10px"},attrs:{id:"buttoninsert"},on:{click:function(t){return e.updatepws()}}},[e._v(" Modifier ")]),r("p",[e._v(e._s(e.msg))])])])])])},ze=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"mail"}},[r("b",[e._v("Mail")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"password"}},[r("b",[e._v("Password")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"password-r"}},[r("b",[e._v("Password repeat")])])}],Fe={data:function(){return{mail:"",password:null,password_repeat:null,msg:"",UserEMail:""}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.state.loggedUserEmail||e.$router.push("/");case 1:case"end":return t.stop()}}),t)})))()},methods:{updatepws:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.password,a=e.password_repeat,s=e.$store.state.loggedUserEmail,null===r&&null===a||(r===a?(e.msg="",m.pwsadd({transaction:"alter_password",UserEMail:s,password:r,passwordRequire:1}).then((function(){console.log("Routing to ApexMap"),e.$router.push("/map")}))):e.msg="les mots de passe saisis ne sont pas identiques",""!==r&&""!==a||(e.msg="il faut remplir toutes les cases"));case 4:case"end":return t.stop()}}),t)})))()}}},qe=Fe,He=(r("08bc"),Object(y["a"])(qe,Be,ze,!1,null,"443a027e",null)),Ve=He.exports,Je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",staticStyle:{"margin-bottom":"50px"}},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-6"},[r("div",{staticClass:"card card-default"},[r("div",{staticClass:"card-header"},[e._v("Reset Password")]),r("div",{staticClass:"card-body"},[r("form",{attrs:{autocomplete:"off",method:"post"},on:{submit:function(t){return t.preventDefault(),e.requestResetPassword(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[e._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"user@example.com",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Send Password Reset Link")])])]),r("p",[e._v(e._s(e.message))])])])])])},Xe=[],Ze={data:function(){return{email:null,has_error:!1,message:""}},methods:{requestResetPassword:function(){var e=this,t=this.email;m.checkEMail(t).then((function(t){e.message=!0===t?"mail trouvé":"mail non enregistré"}))}}},Qe=Ze,Ke=Object(y["a"])(Qe,Je,Xe,!1,null,null,null),et=Ke.exports;a["default"].use(T["a"]);var tt=new T["a"]({routes:[{path:"/map",name:"map",component:ne},{path:"/edit",name:"edit",component:ue},{path:"/partage",name:"partage",component:ve},{path:"/export",name:"export",component:Me},{path:"/profil",name:"profil",component:$e},{path:"/guide",name:"guide",component:Ue},{path:"/",name:"login",component:Te},{path:"/addpsw",name:"addpsw",component:Ve},{path:"/resetp",name:"resetp",component:et}]}),rt=r("5f5b"),at=r("b1e0");a["default"].use(rt["a"]),a["default"].use(at["a"]),a["default"].config.productionTip=!1,new a["default"]({store:f,router:tt,render:function(e){return e(Y)}}).$mount("#app")},"69af":function(e,t,r){"use strict";var a=r("9173"),s=r.n(a);s.a},"70e6":function(e,t,r){"use strict";var a=r("dda5"),s=r.n(a);s.a},"7da3":function(e,t,r){},"7f7a":function(e,t,r){},"85ec":function(e,t,r){},8653:function(e,t,r){"use strict";var a=r("fdc7"),s=r.n(a);s.a},8996:function(e,t,r){"use strict";var a=r("1125"),s=r.n(a);s.a},"90e1":function(e,t,r){"use strict";var a=r("3e46"),s=r.n(a);s.a},9173:function(e,t,r){},aaaa:function(e,t,r){"use strict";var a=r("d3f3"),s=r.n(a);s.a},bb01:function(e,t,r){"use strict";var a=r("1a77"),s=r.n(a);s.a},c87d:function(e,t,r){},cdc8:function(e,t,r){"use strict";var a=r("7f7a"),s=r.n(a);s.a},d3f3:function(e,t,r){},dda5:function(e,t,r){},f840:function(e,t,r){"use strict";var a=r("7da3"),s=r.n(a);s.a},fb16:function(e,t,r){},fdc7:function(e,t,r){}});
//# sourceMappingURL=app.6cf9f5bc.js.map