(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"33e0":function(e,t,r){"use strict";var a=r("77d4"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=(r("99af"),r("c740"),r("d81d"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("b85c")),s=r("2f62"),o=(r("7db0"),r("4160"),r("25f0"),r("159b"),r("96cf"),r("1da1")),i=r("d4ec"),c=r("bee2"),l=r("7338"),u=r.n(l);r("ed18").config();var d="db-services";var f=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"checkEMail",value:function(e){console.log("Checking email of "+e);var t={transaction:"select_useremail",userEMail:e};return new Promise((function(r,a){try{u.a.post(d+"/login",t).then((function(t){void 0!==t.data&&t.data.length>0?r(t.data[0].email===e):r(!1)}))}catch(n){a(n)}}))}},{key:"getObservations",value:function(e){return console.log("getObservations of "+e),new Promise((function(t,r){try{var a={transaction:"select_observations",userEMail:e};u.a.post(d,a).then((function(e){t(e.data)}))}catch(n){r(n)}}))}},{key:"getSharedObservations",value:function(e,t){return console.log("getSharedObservations of  "+e+" from "+t),new Promise((function(r,a){try{var n={transaction:"select_sharedobservations",dataOwnerEMail:e,parcelName:t};u.a.post(d,n).then((function(e){r(e.data)}))}catch(s){a(s)}}))}},{key:"getModifiedWeekMetrics",value:function(e){return console.log("getmodifiedWeekMetrics from "+e),new Promise((function(t,r){try{var a={transaction:"select_modifiedweekmetrics",userEMail:e};u.a.post(d,a).then((function(e){t(e.data)}))}catch(n){r(n)}}))}},{key:"sendToModifiedWeekMetrics",value:function(e){return console.log("sendToModifiedWeekMetrics "+e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_modifiedweekmetrics"===e.transaction||"alter_modifiedweekmetrics"===e.transaction||"delete_modifiedweekmetrics"===e.transaction)?("select_modifiedweekmetrics"===e.transaction&&u.a.post(d,e).then((function(e){t(e.data)})),"alter_modifiedweekmetrics"===e.transaction&&u.a.post(d,e).then((function(e){t(e.affectedrows)})),"delete_modifiedweekmetrics"===e.transaction&&u.a.delete(d,e).then((function(e){t(e.affectedrows)}))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"sendToParcelDataSharing",value:function(e){return console.log("sendToParcelDataSharing"),console.log(e),new Promise((function(t,r){try{null!==e&&null!=e.transaction&&("select_parceldatasharing"===e.transaction||"insert_parceldatasharing"===e.transaction||"delete_parceldatasharing"===e.transaction)?("select_parceldatasharing"===e.transaction&&u.a.post(d,e).then((function(e){t(e.data)})),"insert_parceldatasharing"===e.transaction&&u.a.post(d,e).then((function(e){t(e.affectedrows)})),"delete_parceldatasharing"===e.transaction&&u.a.delete(d,e).then((function(e){t(e.affectedrows)}))):r(" ERROR sendToModifiedWeekMetrics does not accet "+e)}catch(a){r(a)}}))}},{key:"postQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,a){try{u.a.post(e,t).then((function(e){r(e)}))}catch(n){a(n)}}))}},{key:"deleteQuery",value:function(e){return u.a.delete(d,e)}},{key:"getMonthLabel",value:function(e){switch(e){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec";default:return}}},{key:"getDayLabel",value:function(e){switch(e){case"1":return"Mon";case"2":return"Tue";case"3":return"Wed";case"4":return"Thu";case"5":return"Fri";case"6":return"Sat";case"0":return"Sun";default:return}}},{key:"extractUserDataObjFrom",value:function(t){console.log("extractUserDataObjFrom : nbRows: "+t.length);var r={};return t.forEach((function(t){void 0===r.userEMail&&(r=new e.MonitoredUser(t.userEMail,t.userId,t.userName));var a=r.parcels.find((function(e){return e.parcelName===t.parcelName}));void 0===a&&(a=new e.MonitoredParcel(t.parcelName,t.userEMail,t.userName,t.userId,{lat:t.parcelLat,lng:t.parcelLng}),r.parcels.push(a));var n=new Date;n.setTime(t.sessionDateInSec+"000");var s=n.getFullYear(),o=a.parcelYears.find((function(e){return e.yearNumber===s}));void 0===o&&(o=new e.MonitoredYear(s),a.parcelYears.push(o));var i=new Date(s,0,1),c=864e5,l=c*(1===i.getDay()?0:0===i.getDay()?1:8-i.getDay()),u=new Date;u.setTime(i.getTime()+l);var d=n.getTime()===u.getTime()?1:Math.ceil((n.getTime()-u.getTime())/c/7),f=n.getTime()-c*(1===n.getDay()?0:0===n.getDay()?6:n.getDay()-1),p=new Date;p.setTime(f);var h=o.yearWeeks.find((function(e){return e.weekNumber===d}));void 0===h&&(h=new e.MonitoredWeek(t.sessionDateInSec+"000"),o.yearWeeks.push(h));var m=h.weekSessions.find((function(e){return e.sessionDateInMs===t.sessionDateInSec+"000"}));void 0===m&&(m=new e.MonitoredSession(t.sessionDateInSec+"000"),h.weekSessions.push(m));var v=new e.MonitoredObservation(t.obsvLabel,t.obsvDateInMs,t.userName,t.userName,{lat:t.obsvLat,lng:t.obsvLng});m.sessionObservations.push(v)})),r}},{key:"addSharedParcelObservations",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("getSharedParcelObservations"),t.next=3,e.sendToParcelDataSharing({transaction:"select_parceldatasharing",userEMail:r.userEMail});case 3:a=t.sent,s=Object(n["a"])(a),t.prev=5,s.s();case 7:if((o=s.n()).done){t.next=16;break}return i=o.value,t.next=11,e.getSharedObservations(i.dataOwnerEMail,i.parcelName);case 11:c=t.sent,l=e.extractUserDataObjFrom(c),r.parcels.push(l.parcels[0]);case 14:t.next=7;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](5),s.e(t.t0);case 21:return t.prev=21,s.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[5,18,21,24]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"addWeeksToUserDataObj",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2018,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2019,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;if(console.log("addWeeksToUserDataObj "),void 0===t.parcels)throw" No parcels is currently monitored by the user";for(var o=[],i=[],c=0;c<t.parcels.length;c++){var l=t.parcels[c];if(void 0!==l.parcelYears)for(var u=function(e){var t=l.parcelYears[e].yearNumber;void 0===o.find((function(e){return e===t}))&&o.push(t)},d=0;d<l.parcelYears.length;d++)u(d);for(var f=function(e){void 0===o.find((function(t){return t===e}))&&o.push(e)},p=r;p<=a;p++)f(p);if(void 0!==l.parcelYears)for(var h=0;h<l.parcelYears.length;h++)if(void 0!==l.parcelYears[h].yearWeeks)for(var m=function(e){var t=l.parcelYears[h].yearWeeks[e].weekNumber;void 0===i.find((function(e){return e===t}))&&i.push(t)},v=0;v<l.parcelYears[h].yearWeeks.length;v++)m(v);for(var b=function(e){void 0===i.find((function(t){return t===e}))&&i.push(e)},g=n;g<=s;g++)b(g)}for(var w=0;w<t.parcels.length;w++)for(var k=t.parcels[w],y=function(t){var r=o[t],a=k.parcelYears.find((function(e){return e.yearNumber===r}));void 0===a&&(a=new e.MonitoredYear(r),k.parcelYears.push(a));for(var n=function(t){var n=i[t],s=a.yearWeeks.find((function(e){return e.weekNumber===n}));void 0===s&&(s=new e.MonitoredWeek(r,n),a.yearWeeks.push(s))},s=0;s<i.length;s++)n(s)},O=0;O<o.length;O++)y(O)}},{key:"enforceConsistencyOfUserDataObj",value:function(e){if(console.log("enforceConsistencyOfUserDataObj "),void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0)for(var a=0;a<r.parcelYears.length;a++){var n=r.parcelYears[a];if(void 0!==n.yearWeeks&&n.yearWeeks.length>0)for(var s=0;s<n.yearWeeks.length;s++){var o=n.yearWeeks[s];if(void 0!==o.weekSessions&&o.weekSessions.length>0){var i=0,c=0,l=0,u=0,d=0;this.weekICApex=0;for(var f=0;f<o.weekSessions.length;f++){var p=o.weekSessions[f],h=0,m=0;if(void 0!==p.sessionObservations){for(var v=0;v<p.sessionObservations.length;v++){var b=p.sessionObservations[v];"P"===b.obsvLabel&&l++,"R"===b.obsvLabel&&u++,"C"===b.obsvLabel&&d++,h+=b.obsvValue,m++,c+=b.obsvValue,i++}m>0&&(p.sessionAVGrowth=h/m)}}o.weekNbObservations=i,o.weekNbObsFullGrowth=l,o.weekNbObsSlowGrowth=u,o.weekNbObsStoppedGrowth=d,o.weekAVGrowth=Math.round(100*c/i)/100,o.weekPrctFullGrowth=Math.round(1e4*l/i)/100,o.weekPrctSlowGrowth=Math.round(1e4*u/i)/100,o.weekPrctStoppedGrowth=Math.round(1e4*d/i)/100,o.weekICApex=o.reInitICApex()}}}}}},{key:"sortUserDataObjByYearByWeek",value:function(e){if(void 0===e.parcels)throw" No parcels is currently monitored by the user";for(var t=0;t<e.parcels.length;t++){var r=e.parcels[t];if(void 0!==r.parcelYears&&r.parcelYears.length>0){for(var a=0;a<r.parcelYears.length;a++){var n=r.parcelYears[a];void 0!==n.yearWeeks&&n.yearWeeks.length>0&&n.yearWeeks.sort((function(e,t){return e.weekNumber-t.weekNumber}))}r.parcelYears.sort((function(e,t){return e.yearNumber-t.yearNumber}))}}}},{key:"MonitoredUser",value:function(e,t,r){var a=this;this.userEMail=e,this.userId=t,this.userName=r,this.parcels=[],this.toString=function(){return"user: email ".concat(a.userEMail," id: ").concat(a.userId," name ").concat(a.userName)}}},{key:"MonitoredParcel",value:function(e,t,r,a,n){var s=this;this.parcelName=e,this.dataOwnerEMail=t,this.dataOwnerName=r,this.dataOwnerId=a,this.parcelCoord=n,this.parcelYears=[],this.toString=function(){return"parcel: "+s.parcelName}}},{key:"MonitoredYear",value:function(e){this.yearNumber=e,this.yearWeeks=[],this.toString=function(){return"year: ".concat(this.yearNumber)}}},{key:"MonitoredWeek",value:function(t,r){var a=this;if(this.weekNumber=0,this.weekLabel="",this.weekFullDate=new Date,this.weekSessions=[],this.weekNbObservations=0,this.weekNbObsFullGrowth=0,this.weekNbObsSlowGrowth=0,this.weekNbObsStoppedGrowth=0,this.weekPrctFullGrowth=0,this.weekPrctSlowGrowth=0,this.weekPrctStoppedGrowth=0,this.weekAVGrowth=0,this.weekICApex=0,this.toString=function(){return"w"+a.weekNumber+"("+a.weekLabel+")"},void 0===r){var n=t,s=new Date;s.setTime(n);var o=new Date(s.getFullYear(),0,1),i=864e5,c=i*(1===o.getDay()?0:0===o.getDay()?1:8-o.getDay()),l=new Date;l.setTime(o.getTime()+c);var u=s.getTime()===l.getTime()?1:Math.ceil((s.getTime()-l.getTime())/i/7),d=s.getTime()-i*(1===s.getDay()?0:0===s.getDay()?6:s.getDay()-1),f=new Date;f.setTime(d);var p=f.getDate()+" "+e.getMonthLabel(f.getMonth());this.weekNumber=u,this.weekLabel=p,this.weekFullDate=f.toString()}else{var h=t,m=r,v=new Date(h,0,1),b=864e5,g=b*(1===v.getDay()?0:0===v.getDay()?1:8-v.getDay()),w=new Date;w.setTime(v.getTime()+g);var k=w.getTime()+7*b*(m-1),y=new Date;y.setTime(k);var O=y.getDate()+" "+e.getMonthLabel(y.getMonth());this.weekNumber=m,this.weekLabel=O,this.weekFullDate=y.toString()}this.reInitICApex=function(){var e=3;return this.weekAVGrowth>=.75?e=0:this.weekPrctFullGrowth>=5?e=1:this.weekPrctSlowGrowth<=90&&(e=2),e}}},{key:"MonitoredSession",value:function(t){var r=new Date;r.setTime(t),this.sessionDateInMs=t,this.sessionDateLabel=r.getDate()+" "+e.getMonthLabel(r.getMonth())+" "+r.getFullYear(),this.sessionAVGrowth=0,this.sessionICApex=0,this.sessionObservations=[]}},{key:"MonitoredObservation",value:function(e,t,r,a,n){this.initObsvValueFromLabel=function(e){switch(e){case"P":return 1;case"R":return.5;case"C":return 0;default:return}},this.obsvLabel=e,this.obsvValue=this.initObsvValueFromLabel(e),this.obsvDateInMs=t,this.obsvOwnerName=r,this.obsvUserName=a,this.obsvCoord=n}}]),e}(),p=f;a["a"].use(s["a"]);var h=new s["a"].Store({state:{loggedUserEmail:"baptiste.oger@supagro.fr",userDataObj:null,selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,userModifiedWeekMetrics:new Map},getters:{parcelNameList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels?e.userDataObj.parcels.map((function(e){return e.parcelName})):[]},yearNumberList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears.map((function(e){return e.yearNumber})):[]},weekLabelList:function(e){return null!==e.userDataObj&&null!==e.userDataObj.parcels[e.selectedParcelIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx]&&null!==e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks?e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx].yearWeeks.map((function(e){return e.weekLabel})):[]},getParcelIdx:function(e){return function(t,r){return null!==e.userDataObj?e.userDataObj.parcels.findIndex((function(e){return e.parcelName===t&&e.dataOwnerEMail===r})):null}},getYearIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears.findIndex((function(e){return e.yearNumber===t})):-1}},getWeekIdx:function(e){return function(t){return null!==e.userDataObj?e.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(e){return e.weekNumber===t})):-1}},getSelectedWeekMetric:function(e,t){return t.getWeekMetric(e.selectedParcelIdx,e.selectedYearIdx,e.selectedWeekIdx)},getWeekMetric:function(e){return function(t,r,a){var n="pIdx:".concat(t," yIdx:").concat(r," wIdx:").concat(a);if(console.log("pIdx_yIdx_wIdx_mapkey"),console.log(n),e.userModifiedWeekMetrics.has(n))return console.log("modified week metrics"),console.log(e.userModifiedWeekMetrics.get(n)),e.userModifiedWeekMetrics.get(n);e.userDataObj.parcels[e.selectedParcelIdx].parcelYears[e.selectedYearIdx];var s=new Date(e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekFullDate),o={dataUserEMail:e.userDataObj.dataUserEMail,dataOwnerEMail:e.userDataObj.parcels[t].dataOwnerEMail,parcelName:e.userDataObj.parcels[t].parcelName,yearNumber:e.userDataObj.parcels[t].parcelYears[r].yearNumber,weekNumber:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNumber,nbObsFullGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsFullGrowth,nbObsSlowGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsSlowGrowth,nbObsStoppedGrowth:e.userDataObj.parcels[t].parcelYears[r].yearWeeks[a].weekNbObsStoppedGrowth,dateTimeInMs:s.getTime(),modified:!1};return console.log("initially computed week metrics"),console.log(o),o}}},mutations:{initLoggedUserEmail:function(e,t){e.loggedUserEmail=t},initUserDataObj:function(e,t){e.userDataObj=t},updateSelectedParcelIdx:function(e,t){console.log(" updated selectedParcelIdx store "+t),e.selectedParcelIdx=t},updateSelectedYearIdx:function(e,t){e.selectedYearIdx=t},updateSelectedWeekIdx:function(e,t){e.selectedWeekIdx=t},initUserModifiedWeekMetrics:function(e){console.log("initUserModifiedWeekMetrics"),p.sendToModifiedWeekMetrics({transaction:"select_modifiedweekmetrics",userEMail:e.userDataObj.userEMail}).then((function(t){console.log(t);var r,a=new Map,s=Object(n["a"])(t);try{var o=function(){var t=r.value,n=e.userDataObj.parcels.findIndex((function(e){return e.parcelName===t.parcelName&&e.dataOwnerEMail===t.dataOwnerEMail})),s=e.userDataObj.parcels[0].parcelYears.findIndex((function(e){return e.yearNumber===t.yearNumber})),o=e.userDataObj.parcels[0].parcelYears[0].yearWeeks.findIndex((function(e){return e.weekNumber===t.weekNumber}));t.modified=!0,a.set("pIdx:".concat(n," yIdx:").concat(s," wIdx:").concat(o),t)};for(s.s();!(r=s.n()).done;)o()}catch(i){s.e(i)}finally{s.f()}console.log("modifiedWeekMetrics"),console.log(a),e.userModifiedWeekMetrics=a}))},saveSelectedWeekMetric:function(e,t){t.modified=!0,e.modifiedWeekMetrics.set("pIdx:".concat(e.selectedParcelIdx," yIdx:").concat(e.selectedYearIdx," wIdx:").concat(e.selectedYearIdx),t),t.transaction="alter_modifiedweekmetrics",p.sendToModifiedWeekMetrics(t).then((function(e){console.log(e)}))},deleteSelectedWeekMetric:function(e,t){console.log("deleteSelectedWeekMetric "),t.modified?(e.modifiedWeekMetrics.delete("pIdx:".concat(e.selectedParcelIdx," yIdx:").concat(e.selectedYearIdx," wIdx:").concat(e.selectedYearIdx),t),t.transaction="delete_modifiedweekmetrics",p.sendToModifiedWeekMetrics(t).then((function(e){console.log(e)}))):console.log("only modified week metrics can be deleted ")}},actions:{}}),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{attrs:{id:"app"}},[[r("Menu",{attrs:{msg:"Place the menu here"}}),r("hr"),r("TestComponent"),r("hr"),r("Footer")]],2):e._e()},v=[],b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menu"},[r("h1",[e._v(e._s(e.msg))])])},g=[],w={name:"Menu",props:{msg:String},data:function(){return{tabs:["map","summary","export"]}}},k=w,y=(r("d50c"),r("2877")),O=Object(y["a"])(k,b,g,!1,null,"1e479e26",null),M=O.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.$store.state.userDataObj?r("div",{staticClass:"apex-map"},[r("h1",[e._v(e._s("Hello "+e.$store.state.userDataObj.userName+" "))]),e._l(e.$store.state.userDataObj.parcels,(function(t,a){return r("div",{key:t.parcelName,staticClass:"parcels",attrs:{item:t,index:a}},[r("p",{staticClass:"text"},[e._v(" "+e._s("parcelName: "+t.parcelName+" dataOwnerName: "+t.dataOwnerName+" monitored years:["+t.parcelYears+"]")+" ")])])})),r("hr"),r("h1",[e._v(" Select week metrics ")]),r("div",{staticClass:"controlWeekMetrics"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYearIdx,expression:"selectedYearIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedYearIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.yearNumberList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedWeekIdx,expression:"selectedWeekIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedWeekIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.weekLabelList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ")])})),0),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedParcelIdx,expression:"selectedParcelIdx"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedParcelIdx=t.target.multiple?r:r[0]}}},e._l(e.$store.getters.parcelNameList,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(t)+" ("+e._s(e.$store.state.userDataObj.parcels[a].dataOwnerName)+") ")])})),0)]),r("div",{staticClass:"viewWeekMetrics"},[r("p",{staticClass:"text"},[e._v(" "+e._s("nbObsFullGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsFullGrowth+", nbObsSlowGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsSlowGrowth+", nbObsStoppedGrowth: "+e.$store.getters.getSelectedWeekMetric.nbObsStoppedGrowth+", (modified: "+e.$store.getters.getSelectedWeekMetric.modified+")")+" ")])]),r("hr"),r("h1",[e._v(" Parcel Data Shared to someone ")]),e._l(e.parcelRowsSharedToSomeone,(function(t,a){return r("div",{key:a,staticClass:"parcels",attrs:{index:a}},[r("p",{staticClass:"text"},[e._v(" "+e._s("parcelName: "+t.parcelName+" dataOwner: "+t.dataOwnerEMail+" dataUser: "+t.dataUserEMail)+" ")])])})),r("h1",[e._v(" Parcel Data Shared by someone ")]),e._l(e.parcelRowsSharedBySomeone,(function(t,a){return r("div",{key:a,staticClass:"parcels",attrs:{index:a}},[r("p",{staticClass:"text"},[e._v(" "+e._s("parcelName: "+t.parcelName+" dataOwner: "+t.dataOwnerEMail+" dataUser: "+t.dataUserEMail)+" ")])])}))],2):e._e()},x=[],S={name:"TestComponent",data:function(){return{selectedParcelIdx:0,selectedYearIdx:0,selectedWeekIdx:0,parcelRowsSharedToSomeone:[],parcelRowsSharedBySomeone:[]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.sendToParcelDataSharing({transaction:"select_parceldatasharing",ownerEMail:e.$store.state.loggedUserEmail});case 3:return e.parcelRowsSharedToSomeone=t.sent,console.log("parcelRowsSharedToSomeone"),console.log(e.parcelRowsSharedToSomeone),t.next=8,p.sendToParcelDataSharing({transaction:"select_parceldatasharing",userEMail:e.$store.state.loggedUserEmail});case 8:e.parcelRowsSharedBySomeone=t.sent,console.log("parcelRowsSharedBySomeone"),console.log(e.parcelRowsSharedBySomeone),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0.message),e.error=t.t0.message;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},watch:{selectedParcelIdx:function(e){this.$store.commit("updateSelectedParcelIdx",e)},selectedYearIdx:function(e){this.$store.commit("updateSelectedYearIdx",e)},selectedWeekIdx:function(e){this.$store.commit("updateSelectedWeekIdx",e)}},methods:{insertParcelDataSharedToSomeone:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.sendToParcelDataSharing({transaction:"insert_parceldatasharing",dataUserEMail:"TODO ADD",dataOwnerEMail:e.$store.state.userDataObj.userEMail,parcelName:"TODO ADD"});case 2:return t.next=4,p.sendToParcelDataSharing({transaction:"select_parceldatasharing",ownerEMail:e.$store.userDataObj.userEMail});case 4:e.parcelRowsSharedToSomeone=t.sent;case 5:case"end":return t.stop()}}),t)})))()}}},I=S,N=Object(y["a"])(I,D,x,!1,null,null,null),_=N.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer"},[a("h1",[e._v(e._s(e.msg))]),a("img",{attrs:{alt:"Vue logo",src:r("cf05")}})])},W=[],P={name:"Footer",data:function(){return{msg:"Place the footer here"}}},Y=P,T=(r("33e0"),Object(y["a"])(Y,j,W,!1,null,"2e9ae21c",null)),E=T.exports,U={name:"App",components:{Menu:M,TestComponent:_,Footer:E},created:function(){var e=this;try{var t=this.$store.state.loggedUserEmail;p.checkEMail(t).then((function(r){!0===r?p.getObservations(t).then((function(t){var r=p.extractUserDataObjFrom(t);console.log(r),p.addSharedParcelObservations(r).then((function(){p.addWeeksToUserDataObj(r),p.enforceConsistencyOfUserDataObj(r),p.sortUserDataObjByYearByWeek(r),e.$store.commit("initUserDataObj",r),console.log("updated $store.state.userDataObj: "),console.log(e.$store.state.userDataObj),e.$store.commit("initUserModifiedWeekMetrics")}))})):console.log("mail is not valid")}))}catch(r){this.error=r.message}}},G=U,L=(r("034f"),Object(y["a"])(G,m,v,!1,null,null,null)),C=L.exports;a["a"].config.productionTip=!1,new a["a"]({store:h,render:function(e){return e(C)}}).$mount("#app")},"77d4":function(e,t,r){},"85ec":function(e,t,r){},bded:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"},d50c:function(e,t,r){"use strict";var a=r("bded"),n=r.n(a);n.a}});
//# sourceMappingURL=app.37c3f2d9.js.map